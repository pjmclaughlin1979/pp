(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/tiling":1594,"esri/renderers/support/heatmapUtils":1655,"esri/views/2d/engine/BitmapTile":1686,"esri/views/2d/layers/features/tileRenderers/BaseTileRenderer":1715,"esri/views/2d/layers/features/tileRenderers/HeatmapTileRenderer":2277,"esri/views/2d/layers/features/tileRenderers/support/HeatmapSource":2278})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1594:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i(1521),i(352),i(1541),i(1524)],void 0===(r=function(e,t,i,n,r,o){Object.defineProperty(t,"__esModule",{value:!0}),t.TileInfoView=i,t.TileKey=n,t.TileQueue=r,t.TileStrategy=o}.apply(null,n))||(e.exports=r)},1655:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i(93),i(12)],void 0===(r=function(e,t,i,n){function r(e,t,i,r,o){for(var a=new Uint32Array(e*e),l=("buffer"in t?t:new Float64Array(t)),s=("buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer)),u=s.length/(o-r),p=0;p<l.length;p++){var c=l[p],f=Math.floor((c-r)*u);a[p]=s[n.clamp(f,0,s.length-1)]}return a.buffer}function o(e){for(var t=Math.round(3*e),i=2*e*e,n=new Float64Array(2*t+1),r=0;r<=n.length;r++)n[r]=Math.exp(-Math.pow(r-t,2)/i)/Math.sqrt(2*Math.PI)*(e/2);return n}function a(e,t){return"function"==typeof e?e:e?"string"==typeof t?function(t){return-1*+t[e]}:function(i){return+i[e]+t}:function(e){return 1}}Object.defineProperty(t,"__esModule",{value:!0}),t.generateGradient=function(){if(!("document"in i))return function(e){return null};var e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,function(i){for(var n=t.createLinearGradient(0,0,0,e.height),r=0,o=i.colorStops;r<o.length;r++){var a=o[r],l=a.ratio,s=a.color;n.addColorStop(l,"rgba("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+")")}return t.fillStyle=n,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}}(),t.calculateHeatmapIntensityInfo=function(e,t,i,n){for(var r,l=t.blurRadius,s=t.fieldOffset,u=t.field,p=new Float64Array(i*n),c=o(l),f=Math.round(3*l),d=Number.NEGATIVE_INFINITY,h=a(u,s),y=0,v=e;y<v.length;y++)for(var g=v[y],m=g.geometry,w=g.attributes,x=m.x-f,b=m.y-f,I=Math.max(0,x),T=Math.max(0,b),P=Math.min(n,m.y+f),M=Math.min(i,m.x+f),j=+h(w),C=T;C<P;C++)for(var O=c[C-b],E=I;E<M;E++){var R=c[E-x];(r=p[C*i+E]+=O*R*j)>d&&(d=r)}return{matrix:p.buffer,max:d}},t.drawHeatmap=function(e,t,i,n,o,a){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);var l=e.getImageData(0,0,t,t);i&&n&&l.data.set(new Uint8ClampedArray(r(t,i,n,o,a))),e.putImageData(l,0,0)},t.createHeatmapImageData=r,t.createKernel=o,t.createValueFunction=a}.apply(null,n))||(e.exports=r)},1686:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i(5),i(1),i(80),i(1594),i(1595),i(1687)],void 0===(r=function(e,t,i,n,r,o,a,l){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t){var i=e.call(this,t)||this;return i.key=new o.TileKey(0,0,0,0),i}return i(t,e),t.prototype.acquire=function(e){},t.prototype.release=function(){this.key.set(0,0,0,0),this.source=null},t.pool=new r(t,!0),t}(l(a.Bitmap));t.BitmapTile=s}.apply(null,n))||(e.exports=r)},1715:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i(2),i(1),i(6),i(1503),i(0)],void 0===(r=function(e,t,i,n,r,o,a){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(t){var i=e.call(this)||this;return i.tiles=new Map,i.layer=null,i}return i(t,e),t.prototype.destroy=function(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.configuration=this.tiles=null},Object.defineProperty(t.prototype,"updating",{get:function(){return this.isUpdating()},enumerable:!0,configurable:!0}),t.prototype.acquireTile=function(e){var t=this,i=this.createTile(e);return i.once("isReady",function(){return t.notifyChange("updating")}),this.tiles.set(e.id,i),i},t.prototype.forEachTile=function(e){this.tiles.forEach(e)},t.prototype.releaseTile=function(e){this.tiles.delete(e.key.id),this.disposeTile(e)},t.prototype.isUpdating=function(){var e=!0;return this.tiles.forEach(function(t){e=e&&t.isReady}),!e},t.prototype.requestUpdate=function(){this.layerView.requestUpdate()},n([a.property()],t.prototype,"configuration",void 0),n([a.property()],t.prototype,"layer",void 0),n([a.property()],t.prototype,"layerView",void 0),n([a.property()],t.prototype,"tileInfoView",void 0),n([a.property()],t.prototype,"updating",null),n([a.subclass()],t)}(a.declared(r,o));t.default=l}.apply(null,n))||(e.exports=r)},2277:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i(2),i(1),i(359),i(6),i(32),i(9),i(0),i(555),i(1655),i(1555),i(1686),i(1715),i(2278)],void 0===(r=function(e,t,i,n,r,o,a,l,s,u,p,c,f,d,h){Object.defineProperty(t,"__esModule",{value:!0});var y=function(e){function t(t){var i=e.call(this,t)||this;return i.container=new c.BitmapContainer,i}return i(t,e),Object.defineProperty(t.prototype,"gradient",{get:function(){return p.generateGradient(this.configuration.renderer)},enumerable:!0,configurable:!0}),t.prototype.createTile=function(e){var t=f.BitmapTile.pool.acquire();return t.key.set(e),this.tileInfoView.getTileCoords(t,e),t.resolution=this.tileInfoView.getTileResolution(e),t},t.prototype.applyConfiguration=function(e){this.configuration=e;var t=e.renderer,i=t.minPixelIntensity,n=t.maxPixelIntensity,r=this.gradient;this.tiles.forEach(function(e){var t=e.source;t&&(t.minPixelIntensity=i,t.maxPixelIntensity=n,t.gradient=r,e.invalidateTexture())})},t.prototype.clear=function(){this.tiles.forEach(function(e){var t=e.source;t&&(t.intensities=null)})},t.prototype.getProcessorConfiguration=function(){var e=this.layer,t=this.layerView;return{type:"heatmap",renderer:e.renderer.toJSON(),definitionExpression:e.definitionExpression,availableFields:t.availableFields,gdbVersion:e.gdbVersion,historicMoment:e.historicMoment&&e.historicMoment.getTime()}},t.prototype.hitTest=function(e,t){return l.resolve([])},t.prototype.highlight=function(e){return{remove:function(){},pause:function(){},resume:function(){}}},t.prototype.install=function(e){e.addChild(this.container)},t.prototype.uninstall=function(e){this.container.removeAllChildren(),e.removeChild(this.container)},t.prototype.needsProcessorReconfiguration=function(e){var t=this.configuration;return this.wouldClear(e)||t.definitionExpression!==e.definitionExpression},t.prototype.wouldClear=function(e){var t=this.configuration;if(!t||t.availableFields.join()!==e.availableFields.join())return!0;var i=this.configuration&&r.fromJSON(this.configuration.renderer)||null,n=e&&r.fromJSON(e.renderer)||null,o=u.diff(i,n);if(a.isNone(o))return!1;switch(o.type){case"complete":return!0;case"partial":for(var l in o.diff)if("colorStops"!==l&&"minPixelIntensity"!==l&&"maxPixelIntensity"!==l)return!0}return!1},t.prototype.disposeTile=function(e){this.container.removeChild(e),f.BitmapTile.pool.release(e)},t.prototype.supportsRenderer=function(e){return e&&"heatmap"===e.type},t.prototype.onTileData=function(e){var t=this.tiles.get(e.tileKey);if(t){var i=e.intensityInfo,n=this.configuration.renderer,r=n.minPixelIntensity,o=n.maxPixelIntensity,a=t.source||new h.HeatmapSource;a.intensities=i&&i.matrix||null,a.minPixelIntensity=r,a.maxPixelIntensity=o,a.gradient=this.gradient,t.source=a,this.container.addChild(t),this.requestUpdate()}},t.prototype.onTileError=function(e){console.error(e)},t.prototype.setFilterFlags=function(e,t,i,n){},n([s.property({readOnly:!0,dependsOn:["configuration"]})],t.prototype,"gradient",null),n([s.subclass()],t)}(s.declared(o,d.default));t.default=y}.apply(null,n))||(e.exports=r)},2278:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i(1655)],void 0===(r=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.gradient=null,this.height=512,this.width=512}return e.prototype.render=function(e){i.drawHeatmap(e,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)},e}();t.HeatmapSource=n}.apply(null,n))||(e.exports=r)}}]);