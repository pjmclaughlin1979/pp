(function(){(this||window).webpackJsonp.registerAbsMids({"esri/core/sql/WhereClause":559,"esri/tasks/support/FeatureSet":1464,"esri/geometry/support/normalizeUtils":1509,"esri/views/layers/support/popupUtils":1526,"esri/tasks/support/AttachmentQuery":1559,"esri/core/sql/AggregateFunctions":1564,"esri/core/sql/StandardizedFunctions":1565,"esri/tasks/support/RelationshipQuery":1586,"esri/views/3d/layers/support/DefinitionExpressionSceneLayerView":1643,"esri/views/3d/layers/BuildingSublayerView3D":1795,"esri/views/3d/layers/BuildingSceneLayerView3D":2257,"esri/views/3d/layers/BuildingComponentSublayerView3D":2258,"esri/views/3d/layers/BuildingGroupSublayerView3D":2259})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[54,28,95],{1464:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(2),r(43),r(79),r(8),r(24),r(0),r(34),r(69),r(354)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c){var f=new s.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"}),d=function(e){function t(t){var r=e.call(this,t)||this;return r.displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return n(t,e),t.prototype.readFeatures=function(e,t){for(var r=u.fromJSON(t.spatialReference),n=[],i=0;i<e.length;i++){var a=e[i],s=o.fromJSON(a),l=a.geometry&&a.geometry.spatialReference;s.geometry&&!l&&(s.geometry.spatialReference=r),n.push(s)}return n},t.prototype.writeGeometryType=function(e,t,r,n){if(e)f.write(e,t,r,n);else{var i=this.features;if(i)for(var o=0,a=i;o<a.length;o++){var s=a[o];if(s&&s.geometry)return void f.write(s.geometry.type,t,r,n)}}},t.prototype.writeSpatialReference=function(e,t,r,n){if(e)t.spatialReference=e.toJSON();else{var i=this.features;if(i)for(var o=0,a=i;o<a.length;o++){var s=a[o];s&&s.geometry&&s.geometry.spatialReference&&(t.spatialReference=s.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],n=t[1],i=e.translate,o=i[0],a=i[1],s=this.features,l=this._getQuantizationFunction(this.geometryType,function(e){return Math.round((e-o)/r)},function(e){return Math.round((a-e)/n)}),u=0,p=s.length;u<p;u++)l(s[u].geometry)||(s.splice(u,1),u--,p--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this,t=e.geometryType,r=e.features,n=e.transform;if(!n)return this;for(var i=n.translate,o=i[0],a=i[1],s=n.scale,l=s[0],u=s[1],p=this._getHydrationFunction(t,function(e){return e*l+o},function(e){return a-e*u}),c=0,f=r;c<f.length;c++){var d=f[c].geometry;d&&p(d)}return this},t.prototype._quantizePoints=function(e,t,r){for(var n,i,o=[],a=0,s=e.length;a<s;a++){var l=e[a];if(a>0){var u=t(l[0]),p=r(l[1]);u===n&&p===i||(o.push([u-n,p-i]),n=u,i=p)}else n=t(l[0]),i=r(l[1]),o.push([n,i])}return o.length>0?o:null},t.prototype._getQuantizationFunction=function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=p.isPolygon(e)?e.rings:e.paths,o=[],a=0,s=i.length;a<s;a++){var l=i[a],u=n._quantizePoints(l,t,r);u&&o.push(u)}return o.length>0?(p.isPolygon(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i;return(i=n._quantizePoints(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:void 0},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,i,o=p.isPolygon(e)?e.rings:e.paths,a=0,s=o.length;a<s;a++)for(var l=o[a],u=0,c=l.length;u<c;u++){var f=l[u];u>0?(n+=f[0],i+=f[1]):(n=f[0],i=f[1]),f[0]=t(n),f[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,i,o=e.points,a=0,s=o.length;a<s;a++){var l=o[a];a>0?(n+=l[0],i+=l[1]):(n=l[0],i=l[1]),l[0]=t(n),l[1]=r(i)}}:void 0},r([l.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r([l.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r([l.property({type:[o],json:{write:!0}})],t.prototype,"features",void 0),r([l.reader("features")],t.prototype,"readFeatures",null),r([l.property({type:[c],json:{write:!0}})],t.prototype,"fields",void 0),r([l.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:f.read}}})],t.prototype,"geometryType",void 0),r([l.writer("geometryType")],t.prototype,"writeGeometryType",null),r([l.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r([l.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r([l.property({types:i.geometryTypes,json:{read:p.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r([l.property({type:u,json:{write:!0}})],t.prototype,"spatialReference",void 0),r([l.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r([l.property({json:{write:!0}})],t.prototype,"transform",void 0),r([l.subclass("esri.tasks.support.FeatureSet")],t)}(l.declared(a));return d.prototype.toJSON.isDefaultToJSON=!0,d||(d={}),d}.apply(null,n))||(e.exports=i)},1509:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(98),r(13),r(10),r(9),r(65),r(89),r(34),r(96),r(44),r(551)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c){function f(e){return"polygon"===e.type}function d(e){return"polygon"===e[0].type}function h(e){return"polyline"===e[0].type}function y(e){return f(e)?e.rings:e.paths}function v(e,t){return Math.ceil((e-t)/(2*t))}function m(e,t){for(var r=0,n=y(e);r<n.length;r++)for(var i=0,o=n[r];i<o.length;i++){o[i][0]+=t}return e}function g(e){for(var t=[],r=0,n=0,i=0;i<e.length;i++){for(var o=e[i],a=null,s=0;s<o.length;s++)a=o[s],t.push(a),0===s?n=r=a[0]:(r=Math.min(r,a[0]),n=Math.max(n,a[0]));a&&t.push([(r+n)/2,0])}return t}function w(e,t){if(!(e instanceof s||e instanceof a)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw S.error(r),new n(r)}for(var i=[],o=0,l=y(e);o<l.length;o++){var u=l[o],p=[];i.push(p),p.push([u[0][0],u[0][1]]);for(var c=0;c<u.length-1;c++){var d=u[c][0],h=u[c][1],v=u[c+1][0],m=u[c+1][1],g=Math.sqrt((v-d)*(v-d)+(m-h)*(m-h)),w=(m-h)/g,x=(v-d)/g,b=g/t;if(b>1){for(var P=1;P<=b-1;P++){var E=P*t,F=x*E+d,N=w*E+h;p.push([F,N])}var M=(g+Math.floor(b-1)*t)/2,_=x*M+d,O=w*M+h;p.push([_,O])}p.push([v,m])}}return f(e)?new a({rings:i,spatialReference:e.spatialReference}):new s({paths:i,spatialReference:e.spatialReference})}function x(e,t,r){if(t){var n=w(e,1e6);e=p.webMercatorToGeographic(n,!0)}return r&&(e=m(e,r)),e}function b(e,t,r){var n;if(Array.isArray(e)){if((n=e[0])>t){var i=v(n,t);e[0]=n+i*(-2*t)}else if(n<r){i=v(n,r);e[0]=n+i*(-2*r)}}else if((n=e.x)>t){i=v(n,t);e=e.clone().offset(i*(-2*t),0)}else if(n<r){i=v(n,r);e=e.clone().offset(i*(-2*r),0)}return e}function P(e,t){for(var r=-1,n=0;n<t.cutIndexes.length;n++)!function(n){for(var i=t.cutIndexes[n],o=t.geometries[n],a=y(o),s=0;s<a.length;s++)!function(e){var t=a[e];t.some(function(r){if(r[0]<180)return!0;for(var n=0,i=0;i<t.length;i++){var a=t[i][0];n=a>n?a:n}for(var s=-360*v(n=Number(n.toFixed(9)),180),l=0;l<t.length;l++){var u=o.getPoint(e,l);o.setPoint(e,l,u.clone().offset(s,0))}return!0})}(s);if(i===r){if(d(e))for(var l=0,u=y(o);l<u.length;l++){var p=u[l];e[i]=e[i].addRing(p)}else if(h(e))for(var c=0,f=y(o);c<f.length;c++){var m=f[c];e[i]=e[i].addPath(m)}}else r=i,e[i]=o}(n);return e}function E(){return F||(F=new c({url:r.geometryServiceUrl})),F}Object.defineProperty(t,"__esModule",{value:!0});var F,S=i.getLogger("esri.geometry.support.normalizeUtils"),N={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new s({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:l.WebMercator}),minus180Line:new s({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:l.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new s({paths:[[[180,-180],[180,180]]],spatialReference:l.WebMercator}),minus180Line:new s({paths:[[[-180,-180],[-180,180]]],spatialReference:l.WebMercator})}};t.straightLineDensify=w,t.normalizeCentralMeridian=function e(t,r,n){if(!Array.isArray(t))return e([t],r);r||(r=E());for(var i,l,c,f,d,h,y,g,w=0,F=[],S=[],M=0,_=t;M<_.length;M++){var O=_[M];if(O)if(i||(i=O.spatialReference,l=u.getInfo(i),c=i.isWebMercator,f=N[h=c?102100:4326].maxX,d=N[h].minX,y=N[h].plus180Line,g=N[h].minus180Line),l)if("mesh"===O.type)S.push(O);else if("point"===O.type)S.push(b(O.clone(),f,d));else if("multipoint"===O.type){var j=O.clone();j.points=j.points.map(function(e){return b(e,f,d)}),S.push(j)}else if("extent"===O.type){var L=(R=O.clone())._normalize(!1,!1,l);S.push(L.rings?new a(L):L)}else if(O.extent){var R,T=v((R=O.extent).xmin,d)*(2*f),V=0===T?O.clone():m(O.clone(),T);R.offset(T,0),R.intersects(y)&&R.xmax!==f?(w=R.xmax>w?R.xmax:w,V=x(V,c),F.push(V),S.push("cut")):R.intersects(g)&&R.xmin!==d?(w=R.xmax*(2*f)>w?R.xmax*(2*f):w,V=x(V,c,360),F.push(V),S.push("cut")):S.push(V)}else S.push(O.clone());else S.push(O);else S.push(O)}for(var A=v(w,f),I=-90,D=A,C=new s;A>0;){var z=360*A-180;C.addPath([[z,I],[z,-1*I]]),I*=-1,A--}if(F.length>0&&D>0)return r.cut(F,C,n).then(function(e){return P(F,e)}).then(function(e){for(var i=[],o=[],a=0;a<S.length;a++){var s=S[a];if("cut"!==s)o.push(s);else{var l=e.shift(),u=t[a];"polygon"===u.type&&u.rings&&u.rings.length>1&&l.rings.length>=u.rings.length?(i.push(l),o.push("simplify")):o.push(c?p.geographicToWebMercator(l):l)}}return i.length?r.simplify(i,n).then(function(e){for(var t=[],r=0;r<o.length;r++){var n=o[r];"simplify"!==n?t.push(n):t.push(c?p.geographicToWebMercator(e.shift()):e.shift())}return t}):o});for(var G=[],Y=0;Y<S.length;Y++){var U=S[Y];if("cut"!==U)G.push(U);else{var q=F.shift();G.push(!0===c?p.geographicToWebMercator(q):q)}}return o.resolve(G)},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var n=e.spatialReference&&u.getInfo(e.spatialReference);if(!n)return r;var i,o=n.valid,a=o[0],s=o[1],l=2*s,p=r.width,c=r.xmin,f=r.xmax;if(c=(t=[f,c])[0],f=t[1],"extent"===e.type||0===p||p<=s||p>l||c<a||f>s)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;i=g(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;i=g(e.paths);break;case"multipoint":i=e.points}for(var d=r.clone(),h=0;h<i.length;h++){var y=i[h][0];y<0?(y+=s,f=Math.max(y,f)):(y-=s,c=Math.min(y,c))}return d.xmin=c,d.xmax=f,d.width<p?(d.xmin-=s,d.xmax-=s,d):r},t.normalizeMapX=function(e,t){var r=u.getInfo(t);if(r){var n=r.valid,i=n[0],o=n[1],a=o-i;if(e<i)for(;e<i;)e+=a;if(e>o)for(;e>o;)e-=a}return e}}.apply(null,n))||(e.exports=i)},1526:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(22),r(25),r(154),r(32),r(127)],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(e,t){return void 0===t&&(t=e.popupTemplate),n(this,void 0,void 0,function(){var n,s,l,u,p,c,f,d,h,y,v;return r(this,function(r){switch(r.label){case 0:return o.isSome(t)?[4,t.getRequiredFields(e.fields)]:[2,[]];case 1:return n=r.sent(),s=t.lastEditInfoEnabled,l=e.objectIdField,u=e.typeIdField,i.includes(n,"*")?[2,["*"]]:(c=a.fixFields,f=[e.fields],h=(d=n).concat,y=[[u]],(v=s)?[4,a.getFeatureEditFields(e)]:[3,3]);case 2:v=r.sent(),r.label=3;case 3:return(p=c.apply(void 0,f.concat([h.apply(d,y.concat([v||null]))])))&&l&&a.hasField(e.fields,l)&&-1===p.indexOf(l)&&p.push(l),[2,p]}})})},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:o.isSome(t)&&t.defaultPopupTemplateEnabled&&o.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}.apply(null,n))||(e.exports=i)},1559:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(8),r(7),r(0)],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentTypes=null,r.globalIds=null,r.num=null,r.objectIds=null,r.returnMetadata=!1,r.size=null,r.start=null,r.where=null,r}var i;return r(t,e),i=t,t.prototype.writeStart=function(e,t,r){t.resultOffset=this.start,t.resultRecordCount=this.num||10},t.prototype.clone=function(){return new i(o.clone({attachmentTypes:this.attachmentTypes,where:this.where,globalIds:this.globalIds,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))},n([a.property({type:[String],json:{write:!0}})],t.prototype,"attachmentTypes",void 0),n([a.property({type:[Number],json:{write:!0}})],t.prototype,"globalIds",void 0),n([a.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),n([a.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),n([a.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnMetadata",void 0),n([a.property({type:[Number],json:{write:!0}})],t.prototype,"size",void 0),n([a.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),n([a.writer("start"),a.writer("num")],t.prototype,"writeStart",null),n([a.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),i=n([a.subclass("esri.tasks.support.AttachmentQuery")],t)}(a.declared(i))}.apply(null,n))||(e.exports=i)},1564:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length}function n(e){for(var t=r(e),n=e.length,i=0,o=0,a=e;o<a.length;o++){var s=a[o];i+=Math.pow(s-t,2)}return n>1?i/(n-1):0}Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateFunction=function(e,t){var r=i[e.toLowerCase()];if(null==r)throw new Error("Function Not Recognised");if(t.length<r.minParams||t.length>r.maxParams)throw new Error("Invalid Parameter count for call to "+e.toUpperCase());return r.evaluate(t)},t.isAggregate=function(e,t){var r=i[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams};var i={min:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.min.apply(Math,e[0])}},max:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.max.apply(Math,e[0])}},avg:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:r(e[0])}},sum:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}(e[0])}},stddev:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sqrt(n(e[0]))}},count:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].length}},var:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:n(e[0])}}}}.apply(null,n))||(e.exports=i)},1565:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(360)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateFunction=function(e,t){var r=n[e.toLowerCase()];if(null==r)throw new Error("Function Not Recognised");if(t.length<r.minParams||t.length>r.maxParams)throw new Error("Invalid Parameter count for call to "+e.toUpperCase());return r.evaluate(t)},t.isStandardized=function(e,t){var r=n[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams};var n={extract:{minParams:2,maxParams:2,evaluate:function(e){var t=e[0],r=e[1];if(null==r)return null;if(r instanceof Date)switch(t.toUpperCase()){case"SECOND":return r.getSeconds();case"MINUTE":return r.getMinutes();case"HOUR":return r.getHours();case"DAY":return r.getDate();case"MONTH":return r.getMonth()+1;case"YEAR":return r.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:function(e){if(2===e.length){var t=e[0],r=e[1];return null==t||null==r?null:t.toString().substring(r-1)}if(3===e.length){t=e[0],r=e[1];var n=e[2];return null==t||null==r||null==n?null:n<=0?"":t.toString().substring(r-1,r+n-1)}}},position:{minParams:2,maxParams:2,evaluate:function(e){var t=e[0],r=e[1];return null==t||null==r?null:r.indexOf(t)+1}},trim:{minParams:2,maxParams:3,evaluate:function(e){var t=3===e.length,n=t?e[1]:" ",i=t?e[2]:e[1];if(null==n||null==i)return null;var o="("+r.escapeString(n)+")";switch(e[0]){case"BOTH":return i.replace(new RegExp("^"+o+"*|"+o+"*$","g"),"");case"LEADING":return i.replace(new RegExp("^"+o+"*","g"),"");case"TRAILING":return i.replace(new RegExp(o+"*$","g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.abs(e[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.ceil(e[0])}},floor:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.floor(e[0])}},log:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])}},log10:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sin(e[0])}},cos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.cos(e[0])}},tan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.tan(e[0])}},asin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.asin(e[0])}},acos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.acos(e[0])}},atan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.atan(e[0])}},sign:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0]>0?1:e[1]<0?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:Math.pow(e[0],e[1])}},mod:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:e[0]%e[1]}},round:{minParams:1,maxParams:2,evaluate:function(e){var t=e[0],r=2===e.length?Math.pow(10,e[1]):1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:function(e){return null==e[0]?null:1===e.length?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(e){return"string"==typeof e[0]||e[0]instanceof String?e[0].length:0}},concat:{minParams:1,maxParams:1/0,evaluate:function(e){for(var t="",r=0;r<e.length;r++){if(null==e[r])return null;t+=e[r].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toUpperCase()}}}}.apply(null,n))||(e.exports=i)},1586:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(43),r(8),r(7),r(0)],void 0===(i=function(e,t,r,n,i,o,a,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.returnGeometry=!1,r.source=null,r.where=null,r}var o;return r(t,e),o=t,t.prototype._writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.clone=function(){return new o(a.clone({gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source,where:this.where}))},n([s.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),n([s.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),n([s.property({type:Date})],t.prototype,"historicMoment",void 0),n([s.writer("historicMoment")],t.prototype,"_writeHistoricMoment",null),n([s.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),n([s.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),n([s.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),n([s.property({type:i.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),n([s.property({json:{write:!0}})],t.prototype,"relationshipId",void 0),n([s.property({json:{write:!0}})],t.prototype,"returnGeometry",void 0),n([s.property({json:{write:!0}})],t.prototype,"source",void 0),n([s.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),o=n([s.subclass("esri.tasks.support.RelationshipQuery")],t)}(s.declared(o))}.apply(null,n))||(e.exports=i)},1643:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(6),r(10),r(0),r(559),r(127),r(1516)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0});var p=o.getLogger("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._definitionExpressionErrors=0,t._maxDefinitionExpressionErrors=20,t.logError=function(e){t._definitionExpressionErrors<t._maxDefinitionExpressionErrors&&p.error("Error while evaluating definitionExpression: "+e),++t._definitionExpressionErrors===t._maxDefinitionExpressionErrors&&p.error("Further errors are ignored")},t}return r(t,e),Object.defineProperty(t.prototype,"parsedDefinitionExpression",{get:function(){if(this.layer.definitionExpression)try{var e=s.create(this.layer.definitionExpression);if(!e.isStandardized())return p.error("definitionExpression is using non standard function"),null;var t=[],r=e.getFields();return u.findFieldsCaseInsensitive(r,this.layer.fields,{missingFields:t}),t.length>0?(p.error("definitionExpression references unknown fields: "+t.join(", ")),null):(this._definitionExpressionErrors=0,e)}catch(e){return p.error("Failed to parse definitionExpression: "+e),null}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definitionExpressionFields",{get:function(){return this.parsedDefinitionExpression?l.fixFields(this.layer.fields,this.parsedDefinitionExpression.getFields()):null},enumerable:!0,configurable:!0}),t.prototype._evaluateClause=function(e,t){try{return e.testFeature(t)}catch(e){return this.logError(e),!1}},n([a.property()],t.prototype,"layer",void 0),n([a.property({readOnly:!0,dependsOn:["layer.definitionExpression"]})],t.prototype,"parsedDefinitionExpression",null),n([a.property({readOnly:!0,dependsOn:["parsedDefinitionExpression"]})],t.prototype,"definitionExpressionFields",null),n([a.subclass("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView")],t)}(a.declared(i));t.DefinitionExpressionSceneLayerView=c,t.default=c}.apply(null,n))||(e.exports=i)},1795:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(11),r(2),r(1),r(48),r(1503),r(210),r(209),r(0)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u){return function(e){function t(t){var r=e.call(this,t)||this;return r.layer=null,r.parent=null,r.view=null,r}return n(t,e),t.prototype.initialize=function(){},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null!=e?e:1};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},i([u.property()],t.prototype,"layer",void 0),i([u.property()],t.prototype,"parent",void 0),i([u.property({readOnly:!0,dependsOn:["view","visible","parent.suspended"]})],t.prototype,"suspended",null),i([u.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),i([u.property()],t.prototype,"view",void 0),i([u.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),i([u.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),i([u.subclass("esri.views.3d.layers.BuildingSublayerView3D")],t)}(u.declared(a,o,s.Identifiable,l))}.apply(null,n))||(e.exports=i)},2257:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(11),r(2),r(1),r(22),r(25),r(79),r(26),r(10),r(32),r(9),r(21),r(0),r(559),r(2258),r(2259),r(1507),r(1516),r(1514)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,h,y,v,m,g,w){var x=u.getLogger("esri.views.3d.layers.BuildingSceneLayerView3D");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.componentLayerViews=new l,t.groupLayerViews=new l,t._componentPromises=[],t._loadingComponents=0,t}return n(t,e),Object.defineProperty(t.prototype,"parsedFilterExpression",{get:function(){var e=this.layer.activeFilterId,t=null!=e?this.layer.filters.find(function(t){return t.id===e}):null,r=null!=t?t.filterBlocks.find(function(e){return"solid"===e.filterMode.type}):null;if(r)try{var n=h.create(r.filterExpression);return n.isStandardized()?n:(x.error("filterExpression is using non standard function"),null)}catch(e){return x.error("Failed to parse filterExpression: "+e),null}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updatingPercentageValue",{get:function(){var e=this.componentLayerViews,t=this._loadingComponents,r=t+e.length;return e.reduce(function(e,t){return e+t.updatingPercentage},100*t)/r},enumerable:!0,configurable:!0}),t.prototype.isUpdating=function(){return this._loadingComponents>0||this.componentLayerViews.some(function(e){return e.updating})},t.prototype.initialize=function(){g.checkSpatialReference(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this.initializeSubLayerViews(this.layer.sublayers,this)},t.prototype.destroy=function(){this.groupLayerViews&&(this.groupLayerViews.forEach(function(e){return e.destroy()}),this.groupLayerViews=null),this.componentLayerViews&&(this.componentLayerViews.forEach(function(e){return e.destroy()}),this.componentLayerViews=null),this._componentPromises&&(this._componentPromises.forEach(function(e){return e.cancel()}),this._componentPromises=null)},t.prototype.initializeSubLayerViews=function(e,t){var r=this,n=this,i=this.view;e.forEach(function(e){if("building-group"===e.type){var o=new v({layer:e,view:i,parent:t});r.groupLayerViews.push(o),r.initializeSubLayerViews(e.sublayers,o)}else{r._loadingComponents++;var a=e.load().then(function(){r._loadingComponents--;var o=new y({layer:e,layerView:n,view:i,parent:t});return r.componentLayerViews.push(o),r.handles.add([f.init(o,"updating",function(){return r.notifyChange("updating")}),f.init(o,"updatingPercentage",function(){return r.notifyChange("updatingPercentageValue")})]),o.when()});r._componentPromises.push(a)}})},t.prototype.getGraphicFromStageObject=function(e,t){var r=this.componentLayerViews.find(function(t){return t.hasStageObject(e)});return r?r.getGraphicFromStageObject(e,t):null},t.prototype.fetchPopupFeatures=function(e,t){return a(this,void 0,void 0,function(){var r;return o(this,function(n){return p.isSome(t)&&t.clientGraphics&&0!==t.clientGraphics.length?(r=this._findComponent(t.clientGraphics[0].sourceLayer),p.isNone(r)?[2]:[2,r.fetchPopupFeatures(e,t)]):[2]})})},t.prototype.whenGraphicBounds=function(e){var t=this._findComponent(e.sourceLayer);return p.isNone(t)?c.reject():t.whenGraphicBounds(e)},t.prototype._findComponent=function(e){return this.componentLayerViews.find(function(t){return e===t.layer})},t.prototype.highlight=function(e,t){void 0===t&&(t={}),e instanceof s?e=[e]:e instanceof l&&(e=e.toArray());var r=[];if(Array.isArray(e)&&e.length>0&&e[0]instanceof s){for(var n=e,i=new Map,o=0,a=n;o<a.length;o++){var u=a[o],p=i.get(u.sourceLayer);null==p&&(p=[],i.set(u.sourceLayer,p)),p.push(u)}this.componentLayerViews.forEach(function(e){var t=i.get(e.layer);t&&r.push(e.highlight(t))})}return{remove:function(){return r.forEach(function(e){return e.remove()})},pause:function(){return r.forEach(function(e){return e.pause()})},resume:function(){return r.forEach(function(e){return e.resume()})}}},t.prototype.getUsedMemory=function(){return this.componentLayerViews.reduce(function(e,t){return e+t.getUsedMemory()},0)},t.prototype.getUnloadedMemory=function(){return this.componentLayerViews.reduce(function(e,t){return e+t.getUnloadedMemory()},0)},t.prototype.ignoresMemoryFactor=function(){return!1},i([d.property()],t.prototype,"layer",void 0),i([d.property()],t.prototype,"componentLayerViews",void 0),i([d.property()],t.prototype,"groupLayerViews",void 0),i([d.property({readOnly:!0,dependsOn:["layer.filters","layer.activeFilterId"]})],t.prototype,"parsedFilterExpression",null),i([d.property(w.updatingPercentage)],t.prototype,"updatingPercentage",void 0),i([d.property({readOnly:!0})],t.prototype,"updatingPercentageValue",null),i([d.subclass("esri.views.3d.layers.BuildingSceneLayerView3D")],t)}(d.declared(m))}.apply(null,n))||(e.exports=i)},2258:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(11),r(2),r(1),r(22),r(25),r(79),r(13),r(10),r(32),r(9),r(21),r(0),r(127),r(1795),r(1705),r(1516),r(1643),r(1526)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,f,d,h,y,v,m,g,w){var x=u.getLogger("esri.views.3d.layers.BuildingComponentSublayerView3D");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layerView=null,t._elevationContext="scene",t._isIntegratedMesh=!1,t.lodFactor=1,t.progressiveLoadFactor=1,t}return n(t,e),t.prototype.initialize=function(){var e=this;this._layerUid=this.layer.layer.uid,this.handles.add([f.init(this,["layer.renderer","definitionExpressionFields","filterExpressionFields"],function(){return e._updateRequiredFields()}),f.init(this.layer,"renderer",function(t){return e._rendererChange(t)}),this.watch(["parsedDefinitionExpression","parsedFilterExpression"],function(){return e._filterChange()})])},Object.defineProperty(t.prototype,"parsedFilterExpression",{get:function(){if("Overview"===this.layer.modelName)return null;var e=this.layerView.parsedFilterExpression;if(!e)return null;var t=[],r=e.getFields();return m.findFieldsCaseInsensitive(r,this.layer.fields,{missingFields:t}),t.length>0?(x.error("filterExpression references unknown fields: "+t.join(", ")),null):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterExpressionFields",{get:function(){if(this.parsedFilterExpression){var e=this.parsedFilterExpression.getFields();return m.findFieldsCaseInsensitive(e,this.layer.fields)}return null},enumerable:!0,configurable:!0}),t.prototype._createLayerGraphic=function(e){var t=new s(null,null,e);return t.layer=this.layer.layer,t.sourceLayer=this.layer,t},t.prototype.canResume=function(){return this.inherited(arguments)&&(!this._controller||this._controller.rootNodeVisible)},t.prototype.isUpdating=function(){return!(!this._controller||!this._controller.updating)},t.prototype.fetchPopupFeatures=function(e,t){return a(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,f;return o(this,function(o){switch(o.label){case 0:return(e=this._validateFetchPopupFeatures(t))?[2,c.reject(e)]:p.isSome(t)&&t.clientGraphics&&0!==t.clientGraphics.length?(r=[],n=[],a=h.unpackFieldNames,s=[this.layer.fields],[4,w.getRequiredFields(this.layer,w.getFetchPopupTemplate(this.layer,t))]):[2,[]];case 1:for(i=a.apply(void 0,s.concat([o.sent()])),l=0,u=t.clientGraphics;l<u.length;l++)f=u[l],h.featureHasFields(i,f)?r.push(f):n.push(f);return 0===n.length?[2,c.resolve(r)]:[2,this.whenGraphicAttributes(n,i).catch(function(){return n}).then(function(e){return r.concat(e)})]}})})},t.prototype._updateRequiredFields=function(){return a(this,void 0,void 0,function(){var e,t,r,n;return o(this,function(i){switch(i.label){case 0:return t=h.fixFields,r=[this.layer.fields],this.layer.renderer?[4,this.layer.renderer.getRequiredFields(this.layer.fields)]:[3,2];case 1:return n=i.sent(),[3,3];case 2:n=[],i.label=3;case 3:return e=t.apply(void 0,r.concat([n.concat(this.definitionExpressionFields||[],this.filterExpressionFields||[])])),this._set("requiredFields",e),[2]}})})},t.prototype._validateFetchPopupFeatures=function(e){var t=this.layer;return t.popupEnabled?w.getFetchPopupTemplate(t,e)?void 0:new l("buildingscenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new l("buildingscenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:t})},t.prototype.getFilters=function(){var e=this.inherited(arguments);return this.addSqlFilter(e,this.parsedFilterExpression,this.filterExpressionFields,this.logError),this.addSqlFilter(e,this.parsedDefinitionExpression,this.definitionExpressionFields,this.logError),e},i([d.property()],t.prototype,"layer",void 0),i([d.property()],t.prototype,"layerView",void 0),i([d.property({dependsOn:["_controller.updating"]})],t.prototype,"updating",void 0),i([d.property({dependsOn:["_controller.rootNodeVisible"]})],t.prototype,"suspended",void 0),i([d.property({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.3dObject.lodFactor"})],t.prototype,"lodFactor",void 0),i([d.property({readOnly:!0,dependsOn:["layerView.parsedFilterExpression"]})],t.prototype,"parsedFilterExpression",null),i([d.property({type:[String],readOnly:!0,dependsOn:["parsedFilterExpression"]})],t.prototype,"filterExpressionFields",null),i([d.property({readOnly:!0})],t.prototype,"requiredFields",void 0),i([d.subclass("esri.views.3d.layers.BuildingComponentSublayerView3D")],t)}(d.declared(y,v.I3SMeshView3D,g.DefinitionExpressionSceneLayerView))}.apply(null,n))||(e.exports=i)},2259:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(11),r(2),r(1),r(0),r(1795)],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),i([o.subclass("esri.views.3d.layers.BuildingGroupSublayerView3D")],t)}(o.declared(a))}.apply(null,n))||(e.exports=i)},559:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(154),r(546),r(371),r(1564),r(1565),r(1611)],void 0===(i=function(e,t,r,n,i,o,a,s){function l(e){return i(e,["YYYY-M-D H:m:s","YYYY-M-D H:mZ","YYYY-M-D H:m:sZ","YYYY-M-D H:m","YYYY-m-d"]).toDate()}function u(e){return i(e,["YYYY-M-D"]).toDate()}function p(e){return!0===e}function c(e){return Array.isArray(e)?e:[e]}function f(e){return null!==e?!0!==e:null}function d(e,t){if(null==e)return null;for(var r=!1,n=0,i=t;n<i.length;n++){var o=i[n];if(null==o)r=null;else if(e===o){r=!0;break}}return r}function h(e,t,r){if(null==e)return null;for(var n=t,i=r,o="",a="-[]/{}()*+?.\\^$|",s=0,l=0;l<n.length;l++){var u=n.charAt(l);switch(s){case 0:u===i?s=1:a.indexOf(u)>=0?o+="\\"+u:o+="%"===u?".*":"_"===u?".":u;break;case 1:a.indexOf(u)>=0?o+="\\"+u:o+=u,s=0}}return new RegExp("^"+o+"$").test(e)}function y(e){return e instanceof Date?e.valueOf():e}function v(e){for(var t=[],r={},n=0,i=e;n<i.length;n++){var o=i[n],a=o.toLowerCase();void 0===r[a]&&(t.push(o),r[a]=1)}return t}return function(){function e(){this.parseTree=null,this.parameters=null,this._hasStandardizedFunctions=null,this._hasAggregateFunctions=null}return e.create=function(t){var r=new e;r.parseTree=s.WhereGrammar.parse(t);var n=!0,i=!0;return r.visitAll(r.parseTree,function(e){if("function"===e.type){var t=e.name,r=e.args.value.length;n&&(n=a.isStandardized(t,r)),i&&(i=o.isAggregate(t,r))}}),r._hasStandardizedFunctions=n,r._hasAggregateFunctions=i,r},e.prototype.isStandardized=function(){return this._hasStandardizedFunctions},e.prototype.isAggregate=function(){return this._hasAggregateFunctions},e.prototype.setVariablesDictionary=function(e){this.parameters=e},e.prototype.testFeature=function(e){return!!this.evaluateNode(this.parseTree,e)},e.prototype.testSet=function(e){var t=this,r=new n.default;this.visitAll(this.parseTree,function(e){"column_ref"!==e.type||r.has(e.column)||r.set(e.column,e)});for(var i={},o=0,a=e;o<a.length;o++){!function(e){r.forEach(function(r,n){var o=t.featureValue(e,n,r);i[n]?i[n].push(o):i[n]=[o]})}(a[o])}return!!this.evaluateNode(this.parseTree,{attributes:i})},e.prototype.calculateValue=function(e){return this.evaluateNode(this.parseTree,e)},e.prototype.getFunctions=function(){var e=[];return this.visitAll(this.parseTree,function(t){"function"===t.type&&e.push(t.name.toLowerCase())}),v(e)},e.prototype.getExpressions=function(){var e=new n.default;return this.visitAll(this.parseTree,function(t){if("function"===t.type){var r=t.name.toLowerCase(),n=t.args.value[0];if("column_ref"===n.type){var i=n.column,o=r+"-"+i;e.has(o)||e.set(o,{aggregateType:r,field:i})}}}),r.from(e.values())},e.prototype.getFields=function(){var e=[];return this.visitAll(this.parseTree,function(t){"column_ref"===t.type&&e.push(t.column)}),v(e)},e.prototype.getVariables=function(){var e=[];return this.visitAll(this.parseTree,function(t){"param"===t.type&&e.push(t.value.toLowerCase())}),v(e)},e.prototype.featureValue=function(e,t,r){var n=function(e){return e&&"object"==typeof e.attributes}(e)?e.attributes:e,i=n[t];if(void 0!==i)return i;for(var o in n)if(t.toLowerCase()===o.toLowerCase())return r.column=o,n[o];return null},e.prototype.visitAll=function(e,t){if(null!=e)switch(t(e),e.type){case"when_clause":this.visitAll(e.operand,t),this.visitAll(e.value,t);break;case"case_expression":for(var r=0,n=e.clauses;r<n.length;r++){var i=n[r];this.visitAll(i,t)}"simple"===e.format&&this.visitAll(e.operand,t),null!==e.else&&this.visitAll(e.else,t);break;case"expr_list":for(var o=0,a=e.value;o<a.length;o++){i=a[o];this.visitAll(i,t)}break;case"unary_expr":this.visitAll(e.expr,t);break;case"binary_expr":this.visitAll(e.left,t),this.visitAll(e.right,t);break;case"function":this.visitAll(e.args,t)}},e.prototype.evaluateNode=function(e,t){switch(e.type){case"case_expression":if("simple"===e.format){for(var r=y(this.evaluateNode(e.operand,t)),n=0;n<e.clauses.length;n++)if(r===y(this.evaluateNode(e.clauses[n].operand,t)))return this.evaluateNode(e.clauses[n].value,t);if(null!==e.else)return this.evaluateNode(e.else,t)}else{for(n=0;n<e.clauses.length;n++)if(p(this.evaluateNode(e.clauses[n].operand,t)))return this.evaluateNode(e.clauses[n].value,t);if(null!==e.else)return this.evaluateNode(e.else,t)}return null;case"param":return this.parameters[e.value.toLowerCase()];case"expr_list":for(var i=[],s=0,v=e.value;s<v.length;s++){var m=v[s];i.push(this.evaluateNode(m,t))}return i;case"unary_expr":return f(this.evaluateNode(e.expr,t));case"binary_expr":switch(e.operator){case"AND":return function(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t));case"OR":return function(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t));case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null===this.evaluateNode(e.left,t);case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null!==this.evaluateNode(e.left,t);case"IN":var g=c(this.evaluateNode(e.right,t));return d(this.evaluateNode(e.left,t),g);case"NOT IN":g=c(this.evaluateNode(e.right,t));return f(d(this.evaluateNode(e.left,t),g));case"BETWEEN":var w=this.evaluateNode(e.left,t),x=this.evaluateNode(e.right,t);return null==w||null==x[0]||null==x[1]?null:w>=x[0]&&w<=x[1];case"NOTBETWEEN":w=this.evaluateNode(e.left,t),x=this.evaluateNode(e.right,t);return null==w||null==x[0]||null==x[1]?null:w<x[0]||w>x[1];case"LIKE":return h(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t),e.escape);case"NOT LIKE":return f(h(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return function(e,t,r){if(null==t||null==r)return null;var n=y(t),i=y(r);switch(e){case"<>":return n!==i;case"=":return n===i;case">":return n>i;case"<":return n<i;case">=":return n>=i;case"<=":return n<=i}}(e.operator,this.evaluateNode(e.left,t),this.evaluateNode(e.right,t));case"*":return this.evaluateNode(e.left,t)*this.evaluateNode(e.right,t);case"-":return this.evaluateNode(e.left,t)-this.evaluateNode(e.right,t);case"+":return this.evaluateNode(e.left,t)+this.evaluateNode(e.right,t);case"/":return this.evaluateNode(e.left,t)/this.evaluateNode(e.right,t)}throw new Error("Not Supported Operator "+e.operator);case"null":case"bool":case"string":case"number":return e.value;case"date":return u(e.value);case"timestamp":return l(e.value);case"column_ref":return"CURRENT_DATE"===e.column.toUpperCase()?((m=new Date).setHours(0,0,0,0),m):"CURRENT_TIMESTAMP"===e.column.toUpperCase()?new Date:this.featureValue(t,e.column,e);case"function":var b=this.evaluateNode(e.args,t);return this.isAggregate()?o.aggregateFunction(e.name,b):a.evaluateFunction(e.name,b)}throw new Error("Unsupported sql syntax "+e.type)},e}()}.apply(null,n))||(e.exports=i)}}]);