(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/layers/support/popupUtils":1526,"esri/views/layers/ImageryLayerView":1703,"esri/views/2d/layers/ImageryLayerView2D":2236})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1526:function(e,t,r){var a,i;a=[r.dj.c(e.i),t,r(22),r(25),r(154),r(32),r(127)],void 0===(i=function(e,t,r,a,i,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(e,t){return void 0===t&&(t=e.popupTemplate),a(this,void 0,void 0,function(){var a,p,s,u,l,c,d,h,y,f,g;return r(this,function(r){switch(r.label){case 0:return n.isSome(t)?[4,t.getRequiredFields(e.fields)]:[2,[]];case 1:return a=r.sent(),p=t.lastEditInfoEnabled,s=e.objectIdField,u=e.typeIdField,i.includes(a,"*")?[2,["*"]]:(c=o.fixFields,d=[e.fields],y=(h=a).concat,f=[[u]],(g=p)?[4,o.getFeatureEditFields(e)]:[3,3]);case 2:g=r.sent(),r.label=3;case 3:return(l=c.apply(void 0,d.concat([y.apply(h,f.concat([g||null]))])))&&s&&o.hasField(e.fields,s)&&-1===l.indexOf(s)&&l.push(s),[2,l]}})})},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:n.isSome(t)&&t.defaultPopupTemplateEnabled&&n.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}.apply(null,a))||(e.exports=i)},1703:function(e,t,r){var a,i;a=[r.dj.c(e.i),t,r(2),r(1),r(22),r(25),r(13),r(32),r(9),r(0),r(353),r(1508),r(1526)],void 0===(i=function(e,t,r,a,i,n,o,p,s,u,l,c,d){return function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.fetchPopupFeatures=function(e,t){return n(this,void 0,void 0,function(){var r,a,n,u,c,h;return i(this,function(i){switch(i.label){case 0:if(r=this.layer,!e)return[2,s.reject(new o("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:r}))];if(a=r.popupEnabled,n=d.getFetchPopupTemplate(r,t),!a||!p.isSome(n))throw new o("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:a,popupTemplate:n});return[4,n.getRequiredFields()];case 1:return u=i.sent(),(c=new l).geometry=e,c.outFields=u,h={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0,layerView:this,popupTemplate:n},[2,r.queryVisibleRasters(c,h).then(function(e){return e})]}})})},a([u.property()],t.prototype,"layer",void 0),a([u.subclass("esri.views.layers.ImageryLayerView")],t)}(u.declared(c))}.apply(null,a))||(e.exports=i)},2236:function(e,t,r){var a,i;a=[r.dj.c(e.i),t,r(2),r(1),r(79),r(17),r(9),r(14),r(21),r(0),r(1555),r(1512),r(1702),r(1703)],void 0===(i=function(e,t,r,a,i,n,o,p,s,u,l,c,d,h){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handles=new n,t.container=new l.BitmapContainer,t}return r(t,e),t.prototype.hitTest=function(e,t){if(this.suspended)return o.resolve(null);var r=this.view.toMap(p.createScreenPoint(e,t));return o.resolve(new i({attributes:{},geometry:r}))},t.prototype.update=function(e){this.strategy.update(e),this.notifyChange("updating")},t.prototype.attach=function(){var e=this;this.strategy=new d({container:this.container,fetchSource:this.fetchImage.bind(this),requestUpdate:function(){return e.requestUpdate()}}),this._handles.add([s.watch(this,"layer.exportImageServiceParameters.version",function(t){e._exportImageVersion!==t&&(e._exportImageVersion=t,e.requestUpdate())}),this.layer.on("redraw",function(){e.strategy.updateExports(function(t){var r=t.source.getContext("2d");return e.pixelData=e.layer.applyFilter(e._rawPixelData),e._drawPixelData(r,e.pixelData,0,0),null})})])},t.prototype.detach=function(){this.strategy.destroy(),this._handles.removeAll(),this.container.removeAllChildren()},t.prototype.moveStart=function(){},t.prototype.viewChange=function(){},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.doRefresh=function(){this.requestUpdate()},t.prototype.isUpdating=function(){return this.attached&&(this.strategy.updating||this.updateRequested)},t.prototype.fetchImage=function(e,t,r,a){var i=this;return this._exportImageVersion=this.get("layer.exportImageServiceParameters.version"),this.layer.fetchImage(e,t,r,a).then(function(e){i._rawPixelData=e.pixelData,i.pixelData=i.layer.applyFilter(i._rawPixelData);var a=document.createElement("canvas");a.width=t,a.height=r;var n=a.getContext("2d");return i._drawPixelData(n,i.pixelData,0,0),i.notifyChange("updating"),a})},t.prototype._drawPixelData=function(e,t,r,a){if(t.pixelBlock){var i=t.pixelBlock,n=e.createImageData(i.width,i.height),o=i.getAsRGBA();n.data.set(o),e.putImageData(n,r,a)}},a([u.subclass("esri.views.2d.layers.ImageryLayerView2D")],t)}(u.declared(c,h))}.apply(null,a))||(e.exports=i)}}]);