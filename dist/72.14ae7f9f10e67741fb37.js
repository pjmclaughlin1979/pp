(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/3d/layers/VectorTileLayerView3D":1499,"esri/views/3d/layers/LayerView3D":1507,"esri/views/3d/layers/support/layerViewUpdatingProperties":1514,"esri/views/3d/layers/TiledLayerView3D":1592})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{1499:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(9),i(21),i(0),i(1592),i(613),i(1782),i(1784)],void 0===(n=function(e,t,i,r,n,a,o,l,p,s,u){return function(e){function t(t){return e.call(this)||this}return i(t,e),t.prototype.initialize=function(){var e,t,i=this,r=this.layer.compatibleTileInfo256,o=this._getTileInfoSupportError(r,this.layer.fullExtent);o?this.addResolvingPromise(n.reject(o)):t=a.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){var e,t=i.view.basemapTerrain.tilingScheme,r=t.pixelSize[0];i.schemaHelper=new p(r,i.view.spatialReference.isWGS84),e=256===r?i.layer.compatibleTileInfo256:i.view.spatialReference.isWGS84?i.layer.compatibleTileInfo512:i.layer.tileInfo;var n=i._getTileInfoCompatibilityError(e,t);if(n)throw n;i.tileInfo=e,i._updateMinMaxDataLevel()});var l=null;e=this._initializeTileHandler(),this.tileHandler=e[0],this.renderer=e[1],l=e[2],this.watch(["layer.currentStyleInfo","view.pixelRatio"],function(){var e,t,r;l.isFulfilled()||l.cancel(),e=i._initializeTileHandler(),t=e[0],r=e[1],(l=e[2]).then(function(){var e=i.tileHandler;i.renderer=r,i.tileHandler=t,i.emit("data-changed"),e.destroy()})});var s=n.all([t,l]);this.addResolvingPromise(s)},t.prototype.destroy=function(){this.renderer=null,this.tileHandler.destroy(),this.tileHandler=null},t.prototype._initializeTileHandler=function(){var e=new s(this.layer,this.view.pixelRatio,!1,null),t=new u,i=e.start();return i.then(function(){t.initialize(e.spriteMosaic,e.glyphMosaic,!1)}),[e,t,i]},r([o.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),r([o.property()],t.prototype,"layer",void 0),r([o.property()],t.prototype,"updatingPercentageValue",void 0),r([o.subclass("esri.views.3d.layers.VectorTileLayerView3D")],t)}(o.declared(l))}.apply(null,r))||(e.exports=n)},1507:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(9),i(21),i(0),i(357),i(1504)],void 0===(n=function(e,t,i,r,n,a,o,l,p){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slicePlaneEnabled=!1,t.supportsHeightUnitConversion=!1,t}return i(t,e),t.prototype.postscript=function(e){this.inherited(arguments),l.mayHaveHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())},t.prototype._validateHeightModelInfo=function(){var e=this;return n.create(function(t,i){a.whenFalseOnce(e.view.defaultsFromMap,"isHeightModelInfoSearching",function(){var r=l.rejectLayerError(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);r?i(r):t()})})},r([o.property()],t.prototype,"view",void 0),r([o.property()],t.prototype,"slicePlaneEnabled",void 0),r([o.subclass("esri.views.3d.layers.LayerView3D")],t)}(o.declared(p))}.apply(null,r))||(e.exports=n)},1514:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.updatingPercentageValue={value:100,readOnly:!0},t.updatingPercentage={dependsOn:["updating","updatingPercentageValue"],readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}}.apply(null,r))||(e.exports=n)},1592:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(13),i(0),i(1507),i(1514),i(160)],void 0===(n=function(e,t,i,r,n,a,o,l,p){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minDataLevel=0,t.maxDataLevel=1/0,t._isUpdating=!1,t}return i(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpaque",{get:function(){return this.fullOpacity>=1&&this.imageFormatIsOpaque},enumerable:!0,configurable:!0}),t.prototype.getTileUrl=function(e,t,i){return this.layer.getTileUrl(e,t,i)},t.prototype.updatingChanged=function(e){this._isUpdating=e,this.notifyChange("updating")},t.prototype.isUpdating=function(){return this._isUpdating},t.prototype._getTileInfoSupportError=function(e,t){var i=p.checkIfTileInfoSupportedForView(e,t,this.view.spatialReference,this.view.basemapTerrain.manifold);if(i){var r={layer:this.layer,error:i},a=void 0;switch(i.name){case"tilingscheme:local-gcs-not-supported":a=new n("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",r);break;case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":a=new n("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",r);break;default:a=new n("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",r)}return a}return null},t.prototype._getTileInfoCompatibilityError=function(e,t){return t.compatibleWith(e)?null:new n("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")},t.prototype._updateMinMaxDataLevel=function(){var e,t=1/0,i=0;this.tileInfo.lods.forEach(function(e){t=Math.min(e.level,t),i=Math.max(e.level,i)}),e=[t,i],this.minDataLevel=e[0],this.maxDataLevel=e[1]},r([a.property({readOnly:!0})],t.prototype,"imageFormatIsOpaque",null),r([a.property(l.updatingPercentage)],t.prototype,"updatingPercentage",void 0),r([a.property(l.updatingPercentageValue)],t.prototype,"updatingPercentageValue",void 0),r([a.property()],t.prototype,"fullExtent",void 0),r([a.property({readOnly:!0,dependsOn:["fullOpacity","imageFormatIsOpaque"]})],t.prototype,"isOpaque",null),r([a.property()],t.prototype,"layer",void 0),r([a.property()],t.prototype,"minDataLevel",void 0),r([a.property()],t.prototype,"maxDataLevel",void 0),r([a.property()],t.prototype,"tileInfo",void 0),r([a.subclass("esri.views.3d.layers.TiledLayerView3D")],t)}(a.declared(o))}.apply(null,r))||(e.exports=n)}}]);