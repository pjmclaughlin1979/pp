(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/layers/LayerView":1504,"esri/views/2d/engine/webgl/definitions":1506,"esri/views/layers/RefreshableLayerView":1508,"esri/geometry/support/normalizeUtils":1509,"esri/views/2d/engine/Container":1510,"esri/views/2d/layers/LayerView2D":1512,"esri/views/2d/engine/webgl/Geometry":1517,"dojo/Stateful":1527,"esri/views/2d/engine/webgl/Rect":1528,"esri/views/2d/layers/features/support/Tile":1529,"esri/views/2d/engine/webgl/GeometryUtils":1532,"esri/views/2d/layers/features/support/TileStore":1549,"esri/views/layers/GraphicsView":1550,"esri/views/2d/engine/BitmapContainer":1555,"esri/views/2d/engine/webgl/TileClipper":1557,"esri/views/2d/layers/support/GraphicsView2D":1566,"esri/views/2d/engine/webgl/GraphicContainer":1567,"esri/views/2d/layers/graphics/GraphicProcessingQueue":1570,"esri/views/2d/layers/graphics/GraphicStore":1571,"esri/views/2d/engine/webgl/util/iterator":1572,"esri/views/2d/layers/graphics/GraphicStoreItem":1573,"esri/views/2d/engine/Bitmap":1595,"esri/views/2d/engine/webgl/TextShaping":1599,"dojox/string/BidiEngine":1600,"esri/views/2d/engine/webgl/LineTess":1601,"esri/views/2d/layers/KMLLayerView2D":2263})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1504:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(2),i(1),i(48),i(1503),i(210),i(10),i(209),i(9),i(0)],void 0===(n=function(t,e,i,r,n,o,s,a,h,c,l){return function(t){function e(e){var i=t.call(this)||this;return i.layer=null,i.parent=null,i.view=null,i}return i(e,t),e.prototype.initialize=function(){var t=this;this.addResolvingPromise(this.layer),this.when().catch(function(e){if("layerview:create-error"!==e.name){var i=t.layer&&t.layer.id||"no id",r=t.layer&&t.layer.title||"no title";return a.getLogger(t.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+r+"', id: '"+i+"')",e),c.reject(e)}})},e.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(e.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(t){void 0!==t?this._override("visible",t):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullOpacity",{get:function(){var t=function(t){return null==t?1:t};return t(this.get("layer.opacity"))*t(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),e.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},e.prototype.isUpdating=function(){return!1},r([l.property()],e.prototype,"layer",void 0),r([l.property()],e.prototype,"parent",void 0),r([l.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],e.prototype,"suspended",null),r([l.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],e.prototype,"updating",null),r([l.property()],e.prototype,"view",void 0),r([l.property({dependsOn:["layer.visible"]})],e.prototype,"visible",null),r([l.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],e.prototype,"fullOpacity",null),r([l.subclass("esri.views.layers.LayerView")],e)}(l.declared(o,n,s.Identifiable,h))}.apply(null,r))||(t.exports=n)},1506:function(t,e,i){var r,n;r=[i.dj.c(t.i),e],void 0===(n=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.EXTRUDE_SCALE=64,e.PICTURE_FILL_COLOR=4294967295,e.TILE_SIZE=512,e.ANGLE_FACTOR_256=256/360,e.DEBUG_LABELS=!1,e.COLLISION_BUCKET_SIZE=128,e.DOT_DENSITY_MAX_FIELDS=8,e.COLLISION_MAX_ZOOM_DELTA=3,e.COLLISION_EARLY_REJECT_BUCKET_SIZE=16,e.COLLISION_BOX_PADDING=8,e.COLLISION_TILE_BOX_SIZE=e.TILE_SIZE/e.COLLISION_BUCKET_SIZE,e.COLLISION_PLACEMENT_PADDING=8,e.HEURISTIC_GLYPHS_PER_LINE=50,e.HEURISTIC_GLYPHS_PER_FEATURE=10,e.GLYPH_SIZE=24,e.TEXT_LINE_HEIGHT=1.2*e.GLYPH_SIZE,e.TEXT_MAX_WIDTH=10*e.GLYPH_SIZE,e.TEXT_SPACING=0,e.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}},e.TEXTURE_BINDING_SPRITE_ATLAS=0,e.TEXTURE_BINDING_GLYPH_ATLAS=1,e.TEXTURE_BINDING_HIGHLIGHT_0=2,e.TEXTURE_BINDING_HIGHLIGHT_1=3,e.TEXTURE_BINDING_RENDERER_0=4,e.TEXTURE_BINDING_RENDERER_1=5,e.MAX_FILTERS=2,e.FILTER_FLAG_0=1,e.EFFECT_FLAG_0=2}.apply(null,r))||(t.exports=n)},1508:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(2),i(1),i(6),i(0)],void 0===(n=function(t,e,i,r,n,o){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refreshTimestamp=null,e}return i(e,t),e.prototype.refresh=function(t){void 0===t&&(t=Date.now()),this._set("refreshTimestamp",t),this.doRefresh&&this.doRefresh()},r([o.property()],e.prototype,"layer",void 0),r([o.aliasOf("layer.refreshInterval")],e.prototype,"refreshInterval",void 0),r([o.property({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),r([o.subclass("esri.layers.mixins.RefreshableLayerView")],e)}(o.declared(n))}.apply(null,r))||(t.exports=n)},1509:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(98),i(13),i(10),i(9),i(65),i(89),i(34),i(96),i(44),i(551)],void 0===(n=function(t,e,i,r,n,o,s,a,h,c,l,u){function d(t){return"polygon"===t.type}function p(t){return"polygon"===t[0].type}function v(t){return"polyline"===t[0].type}function f(t){return d(t)?t.rings:t.paths}function y(t,e){return Math.ceil((t-e)/(2*e))}function g(t,e){for(var i=0,r=f(t);i<r.length;i++)for(var n=0,o=r[i];n<o.length;n++){o[n][0]+=e}return t}function m(t){for(var e=[],i=0,r=0,n=0;n<t.length;n++){for(var o=t[n],s=null,a=0;a<o.length;a++)s=o[a],e.push(s),0===a?r=i=s[0]:(i=Math.min(i,s[0]),r=Math.max(r,s[0]));s&&e.push([(i+r)/2,0])}return e}function _(t,e){if(!(t instanceof a||t instanceof s)){var i="straightLineDensify: the input geometry is neither polyline nor polygon";throw I.error(i),new r(i)}for(var n=[],o=0,h=f(t);o<h.length;o++){var c=h[o],l=[];n.push(l),l.push([c[0][0],c[0][1]]);for(var u=0;u<c.length-1;u++){var p=c[u][0],v=c[u][1],y=c[u+1][0],g=c[u+1][1],m=Math.sqrt((y-p)*(y-p)+(g-v)*(g-v)),_=(g-v)/m,x=(y-p)/m,C=m/e;if(C>1){for(var b=1;b<=C-1;b++){var w=b*e,T=x*w+p,A=_*w+v;l.push([T,A])}var P=(m+Math.floor(C-1)*e)/2,R=x*P+p,S=_*P+v;l.push([R,S])}l.push([y,g])}}return d(t)?new s({rings:n,spatialReference:t.spatialReference}):new a({paths:n,spatialReference:t.spatialReference})}function x(t,e,i){if(e){var r=_(t,1e6);t=l.webMercatorToGeographic(r,!0)}return i&&(t=g(t,i)),t}function C(t,e,i){var r;if(Array.isArray(t)){if((r=t[0])>e){var n=y(r,e);t[0]=r+n*(-2*e)}else if(r<i){n=y(r,i);t[0]=r+n*(-2*i)}}else if((r=t.x)>e){n=y(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){n=y(r,i);t=t.clone().offset(n*(-2*i),0)}return t}function b(t,e){for(var i=-1,r=0;r<e.cutIndexes.length;r++)!function(r){for(var n=e.cutIndexes[r],o=e.geometries[r],s=f(o),a=0;a<s.length;a++)!function(t){var e=s[t];e.some(function(i){if(i[0]<180)return!0;for(var r=0,n=0;n<e.length;n++){var s=e[n][0];r=s>r?s:r}for(var a=-360*y(r=Number(r.toFixed(9)),180),h=0;h<e.length;h++){var c=o.getPoint(t,h);o.setPoint(t,h,c.clone().offset(a,0))}return!0})}(a);if(n===i){if(p(t))for(var h=0,c=f(o);h<c.length;h++){var l=c[h];t[n]=t[n].addRing(l)}else if(v(t))for(var u=0,d=f(o);u<d.length;u++){var g=d[u];t[n]=t[n].addPath(g)}}else i=n,t[n]=o}(r);return t}function w(){return T||(T=new u({url:i.geometryServiceUrl})),T}Object.defineProperty(e,"__esModule",{value:!0});var T,I=n.getLogger("esri.geometry.support.normalizeUtils"),A={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:h.WebMercator}),minus180Line:new a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:h.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new a({paths:[[[180,-180],[180,180]]],spatialReference:h.WebMercator}),minus180Line:new a({paths:[[[-180,-180],[-180,180]]],spatialReference:h.WebMercator})}};e.straightLineDensify=_,e.normalizeCentralMeridian=function t(e,i,r){if(!Array.isArray(e))return t([e],i);i||(i=w());for(var n,h,u,d,p,v,f,m,_=0,T=[],I=[],P=0,R=e;P<R.length;P++){var S=R[P];if(S)if(n||(n=S.spatialReference,h=c.getInfo(n),u=n.isWebMercator,d=A[v=u?102100:4326].maxX,p=A[v].minX,f=A[v].plus180Line,m=A[v].minus180Line),h)if("mesh"===S.type)I.push(S);else if("point"===S.type)I.push(C(S.clone(),d,p));else if("multipoint"===S.type){var L=S.clone();L.points=L.points.map(function(t){return C(t,d,p)}),I.push(L)}else if("extent"===S.type){var M=(E=S.clone())._normalize(!1,!1,h);I.push(M.rings?new s(M):M)}else if(S.extent){var E,O=y((E=S.extent).xmin,p)*(2*d),G=0===O?S.clone():g(S.clone(),O);E.offset(O,0),E.intersects(f)&&E.xmax!==d?(_=E.xmax>_?E.xmax:_,G=x(G,u),T.push(G),I.push("cut")):E.intersects(m)&&E.xmin!==p?(_=E.xmax*(2*d)>_?E.xmax*(2*d):_,G=x(G,u,360),T.push(G),I.push("cut")):I.push(G)}else I.push(S.clone());else I.push(S);else I.push(S)}for(var U=y(_,d),N=-90,V=U,B=new a;U>0;){var D=360*U-180;B.addPath([[D,N],[D,-1*N]]),N*=-1,U--}if(T.length>0&&V>0)return i.cut(T,B,r).then(function(t){return b(T,t)}).then(function(t){for(var n=[],o=[],s=0;s<I.length;s++){var a=I[s];if("cut"!==a)o.push(a);else{var h=t.shift(),c=e[s];"polygon"===c.type&&c.rings&&c.rings.length>1&&h.rings.length>=c.rings.length?(n.push(h),o.push("simplify")):o.push(u?l.geographicToWebMercator(h):h)}}return n.length?i.simplify(n,r).then(function(t){for(var e=[],i=0;i<o.length;i++){var r=o[i];"simplify"!==r?e.push(r):e.push(u?l.geographicToWebMercator(t.shift()):t.shift())}return e}):o});for(var F=[],q=0;q<I.length;q++){var j=I[q];if("cut"!==j)F.push(j);else{var k=T.shift();F.push(!0===u?l.geographicToWebMercator(k):k)}}return o.resolve(F)},e.getDenormalizedExtent=function(t){var e;if(!t)return null;var i=t.extent;if(!i)return null;var r=t.spatialReference&&c.getInfo(t.spatialReference);if(!r)return i;var n,o=r.valid,s=o[0],a=o[1],h=2*a,l=i.width,u=i.xmin,d=i.xmax;if(u=(e=[d,u])[0],d=e[1],"extent"===t.type||0===l||l<=a||l>h||u<s||d>a)return i;switch(t.type){case"polygon":if(!(t.rings.length>1))return i;n=m(t.rings);break;case"polyline":if(!(t.paths.length>1))return i;n=m(t.paths);break;case"multipoint":n=t.points}for(var p=i.clone(),v=0;v<n.length;v++){var f=n[v][0];f<0?(f+=a,d=Math.max(f,d)):(f-=a,u=Math.min(f,u))}return p.xmin=u,p.xmax=d,p.width<l?(p.xmin-=a,p.xmax-=a,p):i},e.normalizeMapX=function(t,e){var i=c.getInfo(e);if(i){var r=i.valid,n=r[0],o=r[1],s=o-n;if(t<n)for(;t<n;)t+=s;if(t>o)for(;t>o;)t-=s}return t}}.apply(null,r))||(t.exports=n)},1510:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(5),i(548)],void 0===(n=function(t,e,i,r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._childrenSet=new Set,e._childrenToAttach=[],e._childrenToDetach=[],e._renderPhase=3,e.children=[],e}return i(e,t),Object.defineProperty(e.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),e.prototype.detach=function(){for(var t=0,e=this.children.concat(this._childrenToDetach);t<e.length;t++){var i=e[t];i.attached&&(this.detachChild(i),i.attached=!1,i.parent=null)}},e.prototype.doRender=function(t){var e=t.globalOpacity;t.globalOpacity*=this.opacity,this._renderPhase=0,this.attachChildren(),this._renderPhase=1;for(var i=this._childrenToDetach;i.length>0;){var r=i.shift();this.detachChild(r),r.attached=!1,r.parent=null,r.stage=null}this._renderPhase=2,this.renderChildren(t),this._renderPhase=3,t.globalOpacity=e},e.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},e.prototype.addChildAt=function(t,e){if(void 0===e&&(e=this.numChildren),!t)return t;if(this.contains(t))return t;var i=t.parent;i&&i!==this&&i.removeChild(t),e>=this.numChildren?this.children.push(t):this.children.splice(e,0,t),this._childrenSet.add(t);var r=this._childrenToDetach.indexOf(t);return r>-1&&this._childrenToDetach.splice(r,1),this._childrenToAttach.push(t),this._renderPhase>=2&&this.requestRender(),t},e.prototype.contains=function(t){return this._childrenSet.has(t)},e.prototype.getChildIndex=function(t){return this.children.indexOf(t)},e.prototype.getChildAt=function(t){return t<0||t>this.children.length?null:this.children[t]},e.prototype.removeAllChildren=function(){for(var t=this.numChildren;t--;)this.removeChildAt(0)},e.prototype.removeChild=function(t){return this.contains(t)?this.removeChildAt(this.getChildIndex(t)):t},e.prototype.removeChildAt=function(t){var e;if(t<0||t>=this.children.length)return null;if(e=this.children.splice(t,1)[0],function(t,e){t.delete(e)}(this._childrenSet,e),e.attached)this._childrenToDetach.push(e),this._renderPhase>=2&&this.requestRender();else{var i=this._childrenToAttach.indexOf(e);i>-1&&this._childrenToAttach.splice(i,1)}return e},e.prototype.requestChildRender=function(t){t&&t.parent===this&&this._renderPhase>=2&&this.requestRender()},e.prototype.setChildIndex=function(t,e){var i=this.getChildIndex(t);i>-1&&(this.children.splice(i,1),this.children.splice(e,0,t),this._renderPhase>=2&&this.requestRender())},e.prototype.sortChildren=function(t){return this._renderPhase>2&&this.requestRender(),this.children.sort(t)},e.prototype.attachChildren=function(){var t=this._childrenToAttach;if(0!==t.length)for(var e=0,i=!1;!i;){var r=t[e];r.parent=this,r.stage=this.stage,this.attachChild(r)?(r.attached=!0,t.splice(e,1)):++e,i=t.length===e}},e.prototype.renderChildren=function(t){for(var e=this.children,i=e.length,r=0;r<i;r++)e[r].processRender(t)},e.prototype.attachChild=function(t){return t.attach()},e.prototype.detachChild=function(t){t.detach()},e}(r.DisplayObject);e.Container=n}.apply(null,r))||(t.exports=n)},1512:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(2),i(1),i(21),i(0),i(1504)],void 0===(n=function(t,e,i,r,n,o,s){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attached=!1,e.lastUpdateId=-1,e.moving=!1,e.updateRequested=!1,e}return i(e,t),e.prototype.initialize=function(){var t=this;this.when(function(){t.requestUpdate()});var e=function(){return t.notifyChange("rendering")};this.handles.add([n.init(this,"suspended",function(e){t.container&&(t.container.visible=!e),t.view&&!e&&t.updateRequested&&t.view.requestLayerViewUpdate(t)},!0),n.init(this,"fullOpacity",function(e){t.container&&(t.container.opacity=e)},!0),n.on(this,"container","post-render",e),n.on(this,"container","will-render",e)])},e.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null},Object.defineProperty(e.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),e.prototype.isVisibleAtScale=function(t){var e=!0,i=this.layer,r=i.minScale,n=i.maxScale;if(null!=r&&null!=n){var o=!r,s=!n;!o&&t<=r&&(o=!0),!s&&t>=n&&(s=!0),e=o&&s}return e},e.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},e.prototype.processUpdate=function(t){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1},e.prototype.isUpdating=function(){return!1},e.prototype.isRendering=function(){return!1},e.prototype.canResume=function(){var t=this.inherited(arguments);return t&&(t=this.isVisibleAtScale(this.view.scale)),t},r([o.property()],e.prototype,"attached",void 0),r([o.property()],e.prototype,"container",void 0),r([o.property()],e.prototype,"moving",void 0),r([o.property({dependsOn:["attached","suspended","moving"]})],e.prototype,"rendering",null),r([o.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],e.prototype,"suspended",void 0),r([o.property({readOnly:!0})],e.prototype,"updateParameters",void 0),r([o.property()],e.prototype,"updateRequested",void 0),r([o.property({dependsOn:["updateRequested","attached"]})],e.prototype,"updating",null),r([o.property()],e.prototype,"view",void 0),r([o.subclass("esri.views.2d.layers.LayerView2D")],e)}(o.declared(s))}.apply(null,r))||(t.exports=n)},1517:function(t,e,i){var r,n;r=[i.dj.c(t.i),e],void 0===(n=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.equals=function(t,e){return t===this.x&&e===this.y},t.prototype.isEqual=function(t){return t.x===this.x&&t.y===this.y},t.prototype.setCoords=function(t,e){this.x=t,this.y=e},t.prototype.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);this.x/=i,this.y/=i},t.prototype.rightPerpendicular=function(){var t=this.x;this.x=this.y,this.y=-t},t.prototype.move=function(t,e){this.x+=t,this.y+=e},t.prototype.assign=function(t){this.x=t.x,this.y=t.y},t.prototype.assignAdd=function(t,e){this.x=t.x+e.x,this.y=t.y+e.y},t.prototype.assignSub=function(t,e){this.x=t.x-e.x,this.y=t.y-e.y},t.prototype.rotate=function(t,e){var i=this.x,r=this.y;this.x=i*t-r*e,this.y=i*e+r*t},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.distance=function(t,e){var i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)},t.add=function(e,i){return new t(e.x+i.x,e.y+i.y)},t.sub=function(e,i){return new t(e.x-i.x,e.y-i.y)},t}();e.Point=i}.apply(null,r))||(t.exports=n)},1527:function(t,e,i){var r,n;r=[i(351),i(30),i(70),i(364)],void 0===(n=function(t,e,i,r){return t("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(t){var e=this._attrPairNames;return e[t]?e[t]:e[t]={s:"_"+t+"Setter",g:"_"+t+"Getter"}},postscript:function(t){t&&this.set(t)},_get:function(t,e){return"function"==typeof this[e.g]?this[e.g]():this[t]},get:function(t){return this._get(t,this._getAttrNames(t))},set:function(t,e){if("object"==typeof t){for(var i in t)t.hasOwnProperty(i)&&"_watchCallbacks"!=i&&this.set(i,t[i]);return this}var n,o=this._getAttrNames(t),s=this._get(t,o),a=this[o.s];if("function"==typeof a?n=a.apply(this,Array.prototype.slice.call(arguments,1)):this[t]=e,this._watchCallbacks){var h=this;r(n,function(){h._watchCallbacks(t,s,e)})}return this},_changeAttrValue:function(t,e){var i=this.get(t);return this[t]=e,this._watchCallbacks&&this._watchCallbacks(t,i,e),this},watch:function(t,e){var r=this._watchCallbacks;if(!r){var n=this;r=this._watchCallbacks=function(t,e,i,o){var s=function(r){if(r)for(var o=0,s=(r=r.slice()).length;o<s;o++)r[o].call(n,t,e,i)};s(r["_"+t]),o||s(r["*"])}}e||"function"!=typeof t?t="_"+t:(e=t,t="*");var o=r[t];"object"!=typeof o&&(o=r[t]=[]),o.push(e);var s={};return s.unwatch=s.remove=function(){var t=i.indexOf(o,e);t>-1&&o.splice(t,1)},s}})}.apply(null,r))||(t.exports=n)},1528:function(t,e,i){var r,n;r=[i.dj.c(t.i),e],void 0===(n=function(t,e){return function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.width<=0||this.height<=0},enumerable:!0,configurable:!0}),t}()}.apply(null,r))||(t.exports=n)},1529:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(170),i(213),i(37),i(557),i(352)],void 0===(n=function(t,e,i,r,n,o,s){function a(t,e){var i=t.bounds,r=e.bounds;return t.key.id!==e.key.id&&t.key.world===e.key.world&&i[0]<=r[0]&&i[1]<=r[1]&&i[2]>=r[2]&&i[3]>=r[3]}Object.defineProperty(e,"__esModule",{value:!0}),e.isParentOf=a,e.isChildOf=function(t,e){return a(e,t)};var h=function(){function t(t,e){this.bounds=n.create(),this.key=new s(0,0,0,0),this.objectIds=new i.default,this.key.set(e);var r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level,this.needsClear=!0}return Object.defineProperty(t.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.tileInfoView,this.id)},t.prototype.createChildTiles=function(){for(var e=this.key.getChildKeys(),i=r.acquire(),n=0;n<e.length;n++)i[n]=new t(this.tileInfoView,e[n]);return i},t.prototype.getQuantizationParameters=function(){return o.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})},t}();e.Tile=h,e.default=h}.apply(null,r))||(t.exports=n)},1532:function(t,e,i){var r,n;r=[i.dj.c(t.i),e],void 0===(n=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.C_INFINITY=Number.POSITIVE_INFINITY,e.C_PI=Math.PI,e.C_2PI=2*e.C_PI,e.C_PI_BY_2=e.C_PI/2,e.C_RAD_TO_256=128/e.C_PI,e.C_256_TO_RAD=e.C_PI/128,e.C_DEG_TO_256=256/360,e.C_DEG_TO_RAD=e.C_PI/180,e.C_SQRT2=1.414213562,e.C_SQRT2_INV=1/e.C_SQRT2;var i=1/Math.LN2;function r(t,e){return 0<=(t%=e)?t:t+e}e.positiveMod=r,e.radToByte=function(t){return r(t*e.C_RAD_TO_256,256)},e.degToByte=function(t){return r(t*e.C_DEG_TO_256,256)},e.log2=function(t){return Math.log(t)*i},e.sqr=function(t){return t*t},e.clamp=function(t,e,i){return Math.min(Math.max(t,e),i)},e.interpolate=function(t,e,i){return t*(1-i)+e*i},e.between=function(t,e,i){return e<=t&&t<=i||i<=t&&t<=e}}.apply(null,r))||(t.exports=n)},1549:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(5),i(1),i(170),i(48),i(19),i(1533),i(1529),i(352)],void 0===(n=function(t,e,i,r,n,o,s,a,h,c){Object.defineProperty(e,"__esModule",{value:!0});var l={added:[],removed:[]},u=new n.default,d=new c(0,0,0,0),p=function(t){function e(e){var i=t.call(this)||this;return i._tiles=new Map,i._index=a(9,s("csp-restrictions")?function(t){return{minX:t.bounds[0],minY:t.bounds[1],maxX:t.bounds[2],maxY:t.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),i.tiles=[],i.tileScheme=e,i}return i(e,t),e.prototype.destroy=function(){this._tiles.clear()},e.prototype.has=function(t){return this._tiles.has(t)},e.prototype.get=function(t){return this._tiles.get(t)},e.prototype.findByKey=function(t){return this._tiles.get(t.id)},e.prototype.intersections=function(t,e){var i="string"==typeof t?this.get(t):t;if(!i)return[];for(var r=e*i.resolution,n=i.bounds[0]-r,o=i.bounds[1]-r,s=i.bounds[2]+r,a=i.bounds[3]+r,h=[],c=0,l=this._index.search({minX:n,minY:o,maxX:s,maxY:a});c<l.length;c++){var u=l[c],d=u.bounds.slice();d[0]=Math.max(d[0],n),d[1]=Math.max(d[1],o),d[2]=Math.min(d[2],s),d[3]=Math.min(d[3],a),d[2]-d[0]>0&&d[3]-d[1]>0&&h.push({bounds:d,tile:u})}return h},e.prototype.boundsIntersections=function(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})},e.prototype.setViewState=function(t){var e=this.tileScheme.getTileCoverage(t,0);if(e){var i=e.spans,r=e.lodInfo,n=r.level;if(i.length>0)for(var o=0,s=i;o<s.length;o++)for(var a=s[o],c=a.row,p=a.colFrom,v=a.colTo,f=p;f<=v;f++){var y=d.set(n,c,r.normalizeCol(f),r.getWorldForColumn(f)).id;if(u.add(y),!this.has(y)){var g=new h.default(this.tileScheme,y);this._tiles.set(y,g),this._index.insert(g),this.tiles.push(g),l.added.push(g)}}for(var m=this.tiles.length-1;m>=0;m--){g=this.tiles[m];u.has(g.id)||(this._tiles.delete(g.id),this.tiles.splice(m,1),this._index.remove(g),l.removed.push(g))}(l.added.length||l.removed.length)&&this.emit("update",l),u.clear(),l.added.length=0,l.removed.length=0}},e}(o);e.default=p}.apply(null,r))||(t.exports=n)},1550:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(2),i(1),i(6),i(0)],void 0===(n=function(t,e,i,r,n,o){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphics=null,e.renderer=null,e.view=null,e}return i(e,t),r([o.property()],e.prototype,"graphics",void 0),r([o.property()],e.prototype,"renderer",void 0),r([o.property()],e.prototype,"view",void 0),r([o.subclass("esri.views.layers.GraphicsView")],e)}(o.declared(n))}.apply(null,r))||(t.exports=n)},1555:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(5),i(1),i(1510),i(1505)],void 0===(n=function(t,e,i,r,n,o){Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.doRender=function(e){this.visible&&e.drawPhase===o.WGLDrawPhase.MAP&&t.prototype.doRender.call(this,e)},e.prototype.renderChildren=function(t){var e=this.stage.painter,i=this.children,r=t.drawPhase;this.sortChildren(function(t,e){return e.resolution-t.resolution}),t.drawPhase=o.WGLDrawPhase.CLIP,e.startStencilBurn();for(var n=0,s=i.length;n<s;n++){(a=i[n]).attached&&a.visible&&(e.stencilRef=n,a.processRender(t))}t.drawPhase=r,e.startStencilDraw();for(n=0,s=i.length;n<s;n++){var a;(a=i[n]).attached&&a.visible&&(e.stencilRef=n,a.processRender(t))}e.endStencilDraw()},e}(n.Container);e.BitmapContainer=s}.apply(null,r))||(t.exports=n)},1557:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(1506),i(1517),i(1532)],void 0===(n=function(t,e,i,r,n){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e,i){this.ratio=t,this.x=e,this.y=i},s=function(){function t(t,e,r,n,o){void 0===n&&(n=8),void 0===o&&(o=8),this.lines=[],this.starts=[],this.pixelRatio=n,this.pixelMargin=o,this.tileSize=i.TILE_SIZE*n,this.dz=t,this.yPos=e,this.xPos=r}return t.prototype.setExtent=function(t){this.finalRatio=this.tileSize/t*(1<<this.dz);var e=this.pixelRatio*this.pixelMargin;e/=this.finalRatio;var i=t>>this.dz;i<e&&(e=i),this.margin=e,this.xmin=i*this.xPos-e,this.ymin=i*this.yPos-e,this.xmax=this.xmin+i+2*e,this.ymax=this.ymin+i+2*e},t.prototype.reset=function(t){this.type=t,this.lines=[],this.starts=[],this.line=null,this.start=0},t.prototype.moveTo=function(t,e){this._pushLine(),this._prevIsIn=this._isIn(t,e),this._moveTo(t,e,this._prevIsIn),this._prevPt=new r.Point(t,e),this._firstPt=new r.Point(t,e),this._dist=0},t.prototype.lineTo=function(t,e){var i,n,s,a,h,c,l,u,d=this._isIn(t,e),p=new r.Point(t,e),v=r.Point.distance(this._prevPt,p);if(d)this._prevIsIn?this._lineTo(t,e,!0):(i=this._prevPt,n=p,s=this._intersect(n,i),this.start=this._dist+v*(1-this._r),this._lineTo(s.x,s.y,!0),this._lineTo(n.x,n.y,!0));else if(this._prevIsIn)n=this._prevPt,i=p,s=this._intersect(n,i),this._lineTo(s.x,s.y,!0),this._lineTo(i.x,i.y,!1);else{var f=this._prevPt,y=p;if(f.x<=this.xmin&&y.x<=this.xmin||f.x>=this.xmax&&y.x>=this.xmax||f.y<=this.ymin&&y.y<=this.ymin||f.y>=this.ymax&&y.y>=this.ymax)this._lineTo(y.x,y.y,!1);else{var g=[];if((f.x<this.xmin&&y.x>this.xmin||f.x>this.xmin&&y.x<this.xmin)&&(a=(this.xmin-f.x)/(y.x-f.x),(u=f.y+a*(y.y-f.y))<=this.ymin?c=!1:u>=this.ymax?c=!0:g.push(new o(a,this.xmin,u))),(f.x<this.xmax&&y.x>this.xmax||f.x>this.xmax&&y.x<this.xmax)&&(a=(this.xmax-f.x)/(y.x-f.x),(u=f.y+a*(y.y-f.y))<=this.ymin?c=!1:u>=this.ymax?c=!0:g.push(new o(a,this.xmax,u))),(f.y<this.ymin&&y.y>this.ymin||f.y>this.ymin&&y.y<this.ymin)&&(a=(this.ymin-f.y)/(y.y-f.y),(l=f.x+a*(y.x-f.x))<=this.xmin?h=!1:l>=this.xmax?h=!0:g.push(new o(a,l,this.ymin))),(f.y<this.ymax&&y.y>this.ymax||f.y>this.ymax&&y.y<this.ymax)&&(a=(this.ymax-f.y)/(y.y-f.y),(l=f.x+a*(y.x-f.x))<=this.xmin?h=!1:l>=this.xmax?h=!0:g.push(new o(a,l,this.ymax))),0===g.length)h?c?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):c?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<g.length&&g[0].ratio>g[1].ratio)this.start=this._dist+v*g[1].ratio,this._lineTo(g[1].x,g[1].y,!0),this._lineTo(g[0].x,g[0].y,!0);else{this.start=this._dist+v*g[0].ratio;for(var m=0;m<g.length;m++)this._lineTo(g[m].x,g[m].y,!0)}this._lineTo(y.x,y.y,!1)}}this._dist+=v,this._prevIsIn=d,this._prevPt=p},t.prototype.close=function(){if(2<this.line.length){var t=this._firstPt,e=this._prevPt;t.x===e.x&&t.y===e.y||this.lineTo(t.x,t.y);for(var i=this.line,r=i.length;4<=r&&(i[0].x===i[1].x&&i[0].x===i[r-2].x||i[0].y===i[1].y&&i[0].y===i[r-2].y);)i.pop(),i[0].x=i[r-2].x,i[0].y=i[r-2].y,--r}},t.prototype.result=function(t){return void 0===t&&(t=!0),this._pushLine(),0===this.lines.length?null:(3===this.type&&t&&h.simplify(this.tileSize,this.margin*this.finalRatio,this.lines),this.lines)},t.prototype.resultWithStarts=function(){if(2!==this.type)throw new Error("Only valid for lines");this._pushLine();var t=this.lines,e=t.length;if(0===e)return null;for(var i=[],r=0;r<e;r++)i.push({line:t[r],start:this.starts[r]||0});return i},t.prototype._isIn=function(t,e){return t>=this.xmin&&t<=this.xmax&&e>=this.ymin&&e<=this.ymax},t.prototype._intersect=function(t,e){var i,n,o;if(e.x>=this.xmin&&e.x<=this.xmax)o=((n=e.y<=this.ymin?this.ymin:this.ymax)-t.y)/(e.y-t.y),i=t.x+o*(e.x-t.x);else if(e.y>=this.ymin&&e.y<=this.ymax)o=((i=e.x<=this.xmin?this.xmin:this.xmax)-t.x)/(e.x-t.x),n=t.y+o*(e.y-t.y);else{n=e.y<=this.ymin?this.ymin:this.ymax;var s=((i=e.x<=this.xmin?this.xmin:this.xmax)-t.x)/(e.x-t.x),a=(n-t.y)/(e.y-t.y);s<a?(o=s,n=t.y+s*(e.y-t.y)):(o=a,i=t.x+a*(e.x-t.x))}return this._r=o,new r.Point(i,n)},t.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start))),this.line=[],this.start=0},t.prototype._moveTo=function(t,e,i){3!==this.type?i&&(t=Math.round((t-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line.push(new r.Point(t,e))):(i||(t<this.xmin&&(t=this.xmin),t>this.xmax&&(t=this.xmax),e<this.ymin&&(e=this.ymin),e>this.ymax&&(e=this.ymax)),t=Math.round((t-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line.push(new r.Point(t,e)),this._is_h=!1,this._is_v=!1)},t.prototype._lineTo=function(t,e,i){var n,o;if(3!==this.type)if(i){if(t=Math.round((t-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),0<this.line.length&&(n=this.line[this.line.length-1]).equals(t,e))return;this.line.push(new r.Point(t,e))}else this.line&&0<this.line.length&&this._pushLine();else if(i||(t<this.xmin&&(t=this.xmin),t>this.xmax&&(t=this.xmax),e<this.ymin&&(e=this.ymin),e>this.ymax&&(e=this.ymax)),t=Math.round((t-(this.xmin+this.margin))*this.finalRatio),e=Math.round((e-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){var s=(n=this.line[this.line.length-1]).x===t,a=n.y===e;if(s&&a)return;this._is_h&&s?(n.x=t,n.y=e,(o=this.line[this.line.length-2]).x===t&&o.y===e?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(o=this.line[this.line.length-2],this._is_h=o.x===t,this._is_v=o.y===e)):(this._is_h=o.x===t,this._is_v=o.y===e)):this._is_v&&a?(n.x=t,n.y=e,(o=this.line[this.line.length-2]).x===t&&o.y===e?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(o=this.line[this.line.length-2],this._is_h=o.x===t,this._is_v=o.y===e)):(this._is_h=o.x===t,this._is_v=o.y===e)):(this.line.push(new r.Point(t,e)),this._is_h=s,this._is_v=a)}else this.line.push(new r.Point(t,e))},t}();e.TileClipper=s;var a=function(){function t(){}return t.prototype.setExtent=function(t){this._ratio=4096===t?1:4096/t},t.prototype.reset=function(t){this.type=t,this.lines=[],this.line=null},t.prototype.moveTo=function(t,e){this.line&&this.lines.push(this.line),this.line=[];var i=this._ratio;this.line.push(new r.Point(Math.round(t*i),Math.round(e*i)))},t.prototype.lineTo=function(t,e){var i=this._ratio;this.line.push(new r.Point(Math.round(t*i),Math.round(e*i)))},t.prototype.close=function(){var t=this.line;t&&!t[0].isEqual(t[t.length-1])&&t.push(t[0])},t.prototype.result=function(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:(3===this.type&&1!==this._ratio&&h.simplify(4096,64,this.lines),this.lines)},t}();e.SimpleBuilder=a;var h=function(){function t(){}return t.simplify=function(e,i,r){if(r){for(var n=-i,o=e+i,s=-i,a=e+i,h=[],c=[],l=r.length,u=0;u<l;++u){var d=r[u];if(d&&!(d.length<2))for(var p=d[0],v=void 0,f=d.length,y=1;y<f;++y)v=d[y],p.x===v.x&&(p.x<=n&&(p.y>v.y?(h.push(u),h.push(y),h.push(0),h.push(-1)):(c.push(u),c.push(y),c.push(0),c.push(-1))),p.x>=o&&(p.y<v.y?(h.push(u),h.push(y),h.push(1),h.push(-1)):(c.push(u),c.push(y),c.push(1),c.push(-1)))),p.y===v.y&&(p.y<=s&&(p.x<v.x?(h.push(u),h.push(y),h.push(2),h.push(-1)):(c.push(u),c.push(y),c.push(2),c.push(-1))),p.y>=a&&(p.x>v.x?(h.push(u),h.push(y),h.push(3),h.push(-1)):(c.push(u),c.push(y),c.push(3),c.push(-1)))),p=v}if(0!==h.length&&0!==c.length){t.fillParent(r,c,h),t.fillParent(r,h,c);var g=[];t.calcDeltas(g,c,h),t.calcDeltas(g,h,c),t.addDeltas(g,r)}}},t.fillParent=function(t,e,i){for(var r=i.length,o=e.length,s=0;s<o;s+=4){for(var a=e[s],h=e[s+1],c=e[s+2],l=t[a][h-1],u=t[a][h],d=8092,p=-1,v=0;v<r;v+=4)if(i[v+2]===c){var f=i[v],y=i[v+1],g=t[f][y-1],m=t[f][y];switch(c){case 0:case 1:n.between(l.y,g.y,m.y)&&n.between(u.y,g.y,m.y)&&(_=Math.abs(m.y-g.y))<d&&(d=_,p=v);break;case 2:case 3:var _;n.between(l.x,g.x,m.x)&&n.between(u.x,g.x,m.x)&&(_=Math.abs(m.x-g.x))<d&&(d=_,p=v)}}e[s+3]=p}},t.calcDeltas=function(e,i,r){for(var n=i.length,o=0;o<n;o+=4){var s=t.calcDelta(o,i,r,[]);e.push(i[o]),e.push(i[o+1]),e.push(i[o+2]),e.push(s)}},t.calcDelta=function(e,i,r,n){var o=i[e+3];if(-1===o)return 0;var s=n.length;return 1<s&&n[s-2]===o?0:(n.push(o),t.calcDelta(o,r,i,n)+1)},t.addDeltas=function(t,e){for(var i=t.length,r=0,n=0;n<i;n+=4)r<(a=t[n+3])&&(r=a);for(n=0;n<i;n+=4){var o=e[t[n]],s=t[n+1],a=r-t[n+3];switch(t[n+2]){case 0:o[s-1].x-=a,o[s].x-=a,1===s&&(o[o.length-1].x-=a),s===o.length-1&&(o[0].x-=a);break;case 1:o[s-1].x+=a,o[s].x+=a,1===s&&(o[o.length-1].x+=a),s===o.length-1&&(o[0].x+=a);break;case 2:o[s-1].y-=a,o[s].y-=a,1===s&&(o[o.length-1].y-=a),s===o.length-1&&(o[0].y-=a);break;case 3:o[s-1].y+=a,o[s].y+=a,1===s&&(o[o.length-1].y+=a),s===o.length-1&&(o[0].y+=a)}}},t}(),c=function(){function t(){this.linesIn=[],this.linesOut=[]}return t.prototype.cut=function(t,e){var i;if(this.xCut=e,t.rings)this.closed=!0,i=t.rings,this.minPts=4;else{if(!t.paths)return null;this.closed=!1,i=t.paths,this.minPts=2}for(var r=0,n=i;r<n.length;r++)if((v=n[r])&&!(v.length<this.minPts)){for(var o=!0,s=0,a=v;s<a.length;s++){var h=a[s];o?(this.moveTo(h),o=!1):this.lineTo(h)}this.closed&&this.close()}this._pushLineIn(),this._pushLineOut(),i=[];for(var c=0,l=this.linesIn;c<l.length;c++)(v=l[c])&&v.length>=this.minPts&&i.push(v);for(var u=-2*this.xCut,d=0,p=this.linesOut;d<p.length;d++){var v;if((v=p[d])&&v.length>=this.minPts){for(var f=0,y=v;f<y.length;f++)(h=y[f])[0]+=u;i.push(v)}}return this.closed?t.rings=i:t.paths=i,t},t.prototype.moveTo=function(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t},t.prototype.lineTo=function(t){var e=this._side(t[0]);if(e*this._prevSide==-1){var i=this._intersect(this._prevPt,t);this._lineTo(this.xCut,i,0),this._prevSide=0,this._lineTo(t[0],t[1],e)}else this._lineTo(t[0],t[1],e);this._prevSide=e,this._prevPt=t},t.prototype.close=function(){var t=this._firstPt,e=this._prevPt;t[0]===e[0]&&t[1]===e[1]||this.lineTo(t),this._checkClosingPt(this.lineIn),this._checkClosingPt(this.lineOut)},t.prototype._moveTo=function(t,e,i){this.closed?(this.lineIn.push([i<=0?t:this.xCut,e]),this.lineOut.push([0<=i?t:this.xCut,e])):(i<=0&&this.lineIn.push([t,e]),0<=i&&this.lineOut.push([t,e]))},t.prototype._lineTo=function(t,e,i){this.closed?(this._addPolyVertex(this.lineIn,i<=0?t:this.xCut,e),this._addPolyVertex(this.lineOut,0<=i?t:this.xCut,e)):i<0?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([t,e])):0<i?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([t,e])):this._prevSide<0?(this.lineIn.push([t,e]),this.lineOut.push([t,e])):0<this._prevSide&&(this.lineOut.push([t,e]),this.lineIn.push([t,e]))},t.prototype._addPolyVertex=function(t,e,i){var r=t.length;1<r&&t[r-1][0]===e&&t[r-2][0]===e?t[r-1][1]=i:t.push([e,i])},t.prototype._checkClosingPt=function(t){var e=t.length;3<e&&t[0][0]===this.xCut&&t[e-2][0]===this.xCut&&t[1][0]===this.xCut&&(t[0][1]=t[e-2][1],t.pop())},t.prototype._side=function(t){return t<this.xCut?-1:t>this.xCut?1:0},t.prototype._intersect=function(t,e){var i=(this.xCut-t[0])/(e[0]-t[0]);return t[1]+i*(e[1]-t[1])},t.prototype._pushLineIn=function(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn),this.lineIn=[]},t.prototype._pushLineOut=function(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut),this.lineOut=[]},t}();e.CutVertical=c}.apply(null,r))||(t.exports=n)},1566:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(2),i(1),i(11),i(1503),i(210),i(1612),i(9),i(14),i(0),i(65),i(37),i(69),i(96),i(1518),i(1567),i(1616),i(1618),i(1619),i(1620),i(1602),i(1549),i(1570),i(1571),i(1519),i(1550)],void 0===(n=function(t,e,i,r,n,o,s,a,h,c,l,u,d,p,v,f,y,g,m,_,x,C,b,w,T,I,A){function P(t,e,i){if(i.has(t))return i.get(t);var r={tile:e,addedOrModified:[],removed:[]};return i.set(t,r),r}Object.defineProperty(e,"__esModule",{value:!0});var R=new Set,S=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=t.apply(this,e)||this;return r._hiddenGraphics=[],r._tiles=new Map,r._graphicStoreUpdate=!1,r._highlightIDs=new Set,r._graphicsSet=new Set,r._matcher=null,r._tileUpdateSet=new Set,r._tilesToUpdate=new Map,r._pendingUpdates=0,r._attached=!1,r.lastUpdateId=-1,r.updateRequested=!1,r.graphicUpdateHandler=r.graphicUpdateHandler.bind(r),r._addOrUpdateGraphic=r._addOrUpdateGraphic.bind(r),r._processAnalyzedGraphics=r._processAnalyzedGraphics.bind(r),r._graphicsChangeHandler=r._graphicsChangeHandler.bind(r),r}return i(e,t),e.prototype.initialize=function(){var t=this;this._tileStore=new b.default(this.view.featuresTilingScheme),this.container=new y.default({tileInfoView:this.view.featuresTilingScheme,highlightIDs:this._highlightIDs}),this._graphicStore=new T.default(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.renderer,this.graphics),this._graphicProcessingQueue=new w.default({process:this._addOrUpdateGraphic});var e=new C.default(this.container.getMaterialItems);this.renderer&&(this._matcher=_.createMatcher(this.renderer,e,null)),this._meshFactory=new x.default(null,this.uid,null,null,window.devicePixelRatio,this.view.spatialReference,e,null,this._tileStore.tileScheme.tileInfo),this.watch("renderer",function(i){t._graphicStore.renderer=i,i&&(t._matcher=_.createMatcher(t.renderer,e,null))}),this._tileStore.on("update",this._onTileUpdate.bind(this)),this.container.on("attach",function(){t.graphics.items.length>0&&t._graphicsChangeHandler({target:t.graphics,added:t.graphics.items,removed:[],moved:[]}),t.handles.add(t.graphics.on("change",t._graphicsChangeHandler),"graphics"),t._attached=!0,t.notifyChange("updating")})},e.prototype.destroy=function(){this._set("graphics",null),this._graphicStore.clear(),this._tileStore.destroy()},Object.defineProperty(e.prototype,"updating",{get:function(){return!this._attached||0!==this._pendingUpdates||this._graphicProcessingQueue.updating||this._tileUpdateSet.size>0||this._tilesToUpdate.size>0},enumerable:!0,configurable:!0}),e.prototype.install=function(t){t.addChild(this.container)},e.prototype.uninstall=function(t){t.removeChild(this.container)},e.prototype.addHighlight=function(t){for(var e=0,i=t;e<i.length;e++){var r=i[e];this._highlightIDs.add(r)}this._buildHLList()},e.prototype.highlight=function(t){var e=this;return e.addHighlight(t),{remove:function(){e.removeHighlight(t)}}},e.prototype.hitTest=function(t,e){if(!this.view||!this.view.position)return h.resolve();var i=this.view.toMap(c.createScreenPoint(t,e));return this.searchFeatures(i).then(function(t){return t&&t.length?t[0]:null})},e.prototype.searchFeatures=function(t,e){var i=this;return void 0===e&&(e=2),h.create(function(r){r(i._graphicStore.hitTest(t.x,t.y,e,i.view.state.resolution,i.view.state.rotation))})},e.prototype.removeHighlight=function(t){for(var e=0,i=t;e<i.length;e++){var r=i[e];this._highlightIDs.delete(r)}this._buildHLList()},e.prototype.setHighlight=function(t){this._highlightIDs.clear(),this.addHighlight(t)},e.prototype.update=function(t){var e=t.state,i=this.view.featuresTilingScheme.getClosestInfoForScale(e.scale).level;this._graphicStore.updateLevel(i),this._tileStore.setViewState(e),this._graphicStoreUpdate=!0,this.updateRequested=!1},e.prototype.viewChange=function(){this.requestUpdate()},e.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate(this))},e.prototype.processUpdate=function(t){this.updateRequested&&(this.updateRequested=!1,this.update(t))},e.prototype.graphicUpdateHandler=function(t){var e=t.graphic,i=t.property,r=t.newValue;switch(i){case"attributes":break;case"geometry":case"symbol":this._graphicProcessingQueue.push(e,"update");break;case"visible":this._setVisible(e.uid,r)}},e.prototype._getIntersectingTiles=function(t){var e=this._graphicStore.getBounds(t);return e&&0!==d.width(e)&&0!==d.height(e)?this._tileStore.boundsIntersections(e):[]},e.prototype._updateTile=function(t){var e=this,i=t.tile,r=this._getGraphicsData(i,t.addedOrModified);return this._processGraphics(i.key,r).then(function(r){return e._patchTile(i.key,{addOrUpdate:r,remove:t.removed}),r})},e.prototype._graphicsChangeHandler=function(t){var e=this;if(this._pendingUpdates++,this.notifyChange("updating"),!this._graphicStoreUpdate){var i=this.view.state,r=this.view.featuresTilingScheme.getClosestInfoForScale(i.scale).level;this._graphicStore.updateLevel(r),this._tileStore.setViewState(i)}for(var n=t.added,o=t.removed,s=t.moved,a=this._tilesToUpdate,c=[],l=new Array(n.length),u=0;u<n.length;u++){var d=n[u];l[u]=d,this._graphicsSet.add(d),c.push(this._addOrUpdateGraphic(d,"add"))}for(var p=0,v=o;p<v.length;p++){for(var f=v[p],y=0,g=this._getIntersectingTiles(f);y<g.length;y++){var m=g[y];P(m.key.id,m,a).removed.push(f.uid)}this._graphicsSet.delete(f),this._graphicStore.remove(f)}for(var _=0,x=s;_<x.length;_++)for(var C=x[_],b=0,w=this._getIntersectingTiles(C);b<w.length;b++){m=w[b];P(m.key.id,m,a).addedOrModified.push(C)}h.all(c).then(function(){for(var t,i=0;i<l.length;i++){t=l[i];for(var r=0,n=e._getIntersectingTiles(t);r<n.length;r++){var o=n[r];P(o.key.id,o,a).addedOrModified.push(t)}}e._graphicStore.updateZ();var s=[];return a.forEach(function(t){return s.push(e._updateTile(t))}),h.all(s).then(function(){a.clear(),e._pendingUpdates--,e.notifyChange("updating")})}).catch(function(){e._pendingUpdates--})},e.prototype._buildHLList=function(){for(var t=0,e=this.container.children;t<e.length;t++)e[t].buildHLList(this._highlightIDs);this.container.requestRender()},e.prototype._getSymbolResources=function(t){var e=t.symbol;if(!e&&this.renderer&&(e=this.renderer.getSymbol(t,{scale:this.view.scale})),!e||e&&"text"!==e.type)return h.resolve(null);R.clear();for(var i=e,r=i.text,n=0;n<r.length;n++)R.add(r.charCodeAt(n));var o=[];R.forEach(function(t){return o.push(t)});var s=[];return s.push({symbol:i.toJSON(),id:0,glyphIds:o}),this.container.getMaterialItems(s).then(function(t){return t.length>0?t[0].mosaicItem:null})},e.prototype._projectAndNormalizeGeometry=function(t){var e=this;if(!t.geometry)return h.resolve(null);var i=t.geometry;if(p.isPolygon(i)){var r=i.rings;i.rings=r}else if(p.isPolyline(i)){var n=i.paths;i.paths=n}else p.isExtent(i)&&(i=u.fromExtent(i));return f.checkProjectionSupport(i.spatialReference,this.view.spatialReference).then(function(){var t=I.normalizeCentralMeridian(i),r=f.project(t,i.spatialReference,e.view.spatialReference);return I.ensureClosedRings(r),r})},e.prototype._onTileUpdate=function(t){var e=this,i=v.getInfo(this.view.spatialReference);if(t.added&&t.added.length>0)for(var r=this,n=0,o=t.added;n<o.length;n++){!function(t){var n=r._graphicStore.queryTileData(t);if(i)for(var o=Math.round((i.valid[1]-i.valid[0])/t.resolution),s=0,a=n;s<a.length;s++){var h=a[s];h.geometry&&p.isPoint(h.geometry)&&r._wrapPoints(h,o)}r._tileUpdateSet.add(t.key),r.notifyChange("updating"),r._processGraphics(t.key,n).then(function(i){e._addTile(t.key,i),e._tileUpdateSet.delete(t.key),e.notifyChange("updating")}).catch(function(){e._tileUpdateSet.delete(t.key),e.notifyChange("updating")})}(o[n])}if(t.removed&&t.removed.length>0)for(var s=0,a=t.removed;s<a.length;s++){var h=a[s];this._removeTile(h.key)}},e.prototype._addOrUpdateGraphic=function(t,e){var i=this,r=this._projectAndNormalizeGeometry(t),n=this._getSymbolResources(t);return h.all([r,n]).then(function(r){var n=r[0],o=r[1];return"add"===e?i._addProjectedGraphic(t,o,n):i._updateGraphic(t,o,n)})},e.prototype._addProjectedGraphic=function(t,e,i){if(!this._graphicsSet.has(t))return null;t.visible||this._hiddenGraphics.push(t.uid);var r=this._graphicStore.add(t,e,i);return!r||0===d.width(r)&&0===d.height(r)?null:r},e.prototype._updateGraphic=function(t,e,i){var r=this;if(!this._graphicStore.has(t))return h.resolve();for(var n=this._graphicStore.update(t,e,i),o=n.oldBounds,s=n.newBounds,c=0===d.width(o)&&0===d.height(o),l=0===d.width(s)&&0===d.height(s),u=c?[]:this._tileStore.boundsIntersections(o),p=l?[]:this._tileStore.boundsIntersections(s),v=a.acquire(),f=0,y=u;f<y.length;f++){var g=y[f];v.set(g.key,{addOrUpdate:null,remove:[t.uid]})}for(var m=0,_=p;m<_.length;m++){g=_[m];var x=this._getGraphicData(g,t);if(v.has(g.key)){var C=v.get(g.key);C.remove.length=0,C.addOrUpdate=x}else v.set(g.key,{addOrUpdate:x,remove:null})}var b=[];return v.forEach(function(t,e){var i=r._processGraphics(e,t.addOrUpdate).then(function(i){r._patchTile(e,{addOrUpdate:i,remove:t.remove})});b.push(i)}),a.release(v),h.all(b).then(function(){return s})},e.prototype._addTile=function(t,e){var i=d.create();this.view.featuresTilingScheme.getTileBounds(i,t);var r=new m(t,i,!0),n={clear:!0,addOrUpdate:e,remove:[]};r.setData(n,!1,!1),r.buildHLList(this._highlightIDs),this._hiddenGraphics.length>0&&r.setFilterFlag(0,[],this._hiddenGraphics),this._tiles.set(t,r),this.container.addChild(r)},e.prototype._removeTile=function(t){if(this._tiles.has(t)){var e=this._tiles.get(t);this.container.removeChild(e)}},e.prototype._patchTile=function(t,e){if(this._tiles.has(t)){var i=this._tiles.get(t);i.setData(e,!1,!1),i.buildHLList(this._highlightIDs),this._hiddenGraphics.length>0&&i.setFilterFlag(0,[],this._hiddenGraphics),this.container.requestRender()}},e.prototype._setVisible=function(t,e){var i=[],r=[],n=this._hiddenGraphics.indexOf(t);if(e){if(-1===n)return;this._hiddenGraphics.splice(n,1),i.push(t)}else{if(-1!==n)return;this._hiddenGraphics.push(t),r.push(t)}for(var o=0,s=this.container.children;o<s.length;o++){var a=s[o];a.data&&a.setFilterFlag(0,i,r)}},e.prototype._getGraphicsData=function(t,e){var i=v.getInfo(this.view.spatialReference),r=this._graphicStore.getGraphicsData(t,e);if(i)for(var n=Math.round((i.valid[1]-i.valid[0])/t.resolution),o=0,s=r;o<s.length;o++){var a=s[o];a.geometry&&p.isPoint(a.geometry)&&this._wrapPoints(a,n)}return r.sort(function(t,e){return t.insertAfter-e.insertAfter}),r},e.prototype._getGraphicData=function(t,e){var i=this._graphicStore.getGraphicData(t,e),r=[i],n=v.getInfo(this.view.spatialReference);if(n){var o=Math.round((n.valid[1]-n.valid[0])/t.resolution);i.geometry&&p.isPoint(i.geometry)&&this._wrapPoints(i,o)}return r},e.prototype._wrapPoints=function(t,e){var i=t.geometry;512===e?i.x<20?t.geometry={points:[[i.x,i.y],[e,0]]}:i.x>492&&(t.geometry={points:[[i.x,i.y],[-e,0]]}):i.x<-20?t.geometry={points:[[i.x,i.y],[e,0]]}:i.x>532&&(t.geometry={points:[[i.x,i.y],[-e,0]]})},e.prototype._processGraphics=function(t,e){var i=this;return e&&e.length&&this._meshFactory?this._meshFactory.analyze(e,this._matcher).then(function(e){return i._processAnalyzedGraphics(t,e)}):h.resolve(null)},e.prototype._processAnalyzedGraphics=function(t,e){for(var i=this._meshFactory,r=i.createMeshData(e.length),n=0,o=e;n<o.length;n++){var s=o[n];i.write(r,s,null,null,t.level)}return g.fromMeshData(r)},r([l.property()],e.prototype,"_graphicProcessingQueue",void 0),r([l.property({constructOnly:!0})],e.prototype,"graphics",void 0),r([l.property({dependsOn:["_graphicProcessingQueue.updating"]})],e.prototype,"updating",null),r([l.property()],e.prototype,"view",void 0),r([l.property()],e.prototype,"updateRequested",void 0),r([l.subclass("esri.views.2d.layers.support.GraphicsView2D")],e)}(l.declared(A,o,s.Identifiable));e.default=S}.apply(null,r))||(t.exports=n)},1567:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(11),i(5),i(9),i(1510),i(1505),i(1614)],void 0===(n=function(t,e,i,r,n,o,s,a){Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(e){var i=t.call(this)||this;return i._displayHeight=0,i._displayWidth=0,i._rendererInfo=new a,i.tileInfoView=e.tileInfoView,i.highlightIDs=e.highlightIDs,i.getMaterialItems=i.getMaterialItems.bind(i),i}return r(e,t),e.prototype.dispose=function(){this.removeAllChildren();for(var t=0,e=this.children;t<e.length;t++)e[t].dispose()},e.prototype.disposeWebGLResources=function(){for(var t=0,e=this.children;t<e.length;t++)e[t].clear()},e.prototype.displayWidth=function(){return this._displayWidth},Object.defineProperty(e.prototype,"displayHeight",{get:function(){return this._displayHeight},enumerable:!0,configurable:!0}),e.prototype.setVisibility=function(t,e){},e.prototype.getMaterialItems=function(t){var e=t;if(e&&0!==e.length){for(var i=[],r=this.stage.painter.textureManager,o=0,s=e;o<s.length;o++){var a=s[o];i.push(r.rasterizeItem(a.symbol,a.glyphIds))}return n.all(i).then(function(t){return t.map(function(t,i){return{id:e[i].id,mosaicItem:t}})})}},e.prototype.renderChildren=function(t){var e=this.stage.painter;if(this._updateTilesTransform(t.state,this.tileInfoView.getClosestInfoForScale(t.state.scale).level),t.drawPhase===s.WGLDrawPhase.MAP){var r=this.tileInfoView.getClosestInfoForScale(t.state.scale).level,n=this.tileInfoView.tileInfo.scaleToZoom(t.state.scale),o=this._rendererInfo,a=i({},t,{rendererInfo:o,requiredLevel:r,displayLevel:n,context:this.stage.context,painter:e});this.sortChildren(function(t,e){return t.key.level-e.key.level!=0?t.key.level-e.key.level:t.key.row-e.key.row!=0?t.key.row-e.key.row:t.key.col-e.key.col});var h=a.drawPhase;e.draw(a,this.children,h,null),0<this.highlightIDs.size&&e.highlight(a,this.children)}},e.prototype._updateTilesTransform=function(t,e){for(var i=0,r=this.children;i<r.length;i++){var n=r[i],o=this.tileInfoView.tileInfo.lods[n.key.level].resolution/(t.resolution*t.pixelRatio);n.setTransform(t,o)}},e}(o.Container);e.default=h}.apply(null,r))||(t.exports=n)},1570:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(2),i(1),i(6),i(57),i(0)],void 0===(n=function(t,e,i,r,n,o,s){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var i=t.call(this,e)||this;return i._queue=new Map,i._queueArray=[],i._onGoingGraphic=null,i._onGoingPromise=null,i._scheduledNextHandle=null,i._timestamp=Date.now(),i._next=i._next.bind(i),i._finalize=i._finalize.bind(i),i}return i(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this._queueArray.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updating",{get:function(){return this._queueArray.length>0||null!==this._onGoingPromise},enumerable:!0,configurable:!0}),e.prototype.cancel=function(t){if(this._onGoingGraphic&&this._onGoingGraphic.graphic===t&&(this._onGoingPromise.cancel(),this._onGoingGraphic=this._onGoingPromise=null),this._queue.has(t)){var e=this._queue.get(t);this._queue.delete(t);var i=this._queueArray.indexOf(e);this._queueArray.slice(i,1)}this._scheduleNext(),this.notifyChange("updating")},e.prototype.clear=function(){this._queue.clear(),this._queueArray.length=0,this._onGoingPromise&&(this._onGoingPromise.cancel(),this._onGoingGraphic=this._onGoingPromise=null),this._cancelNext(),this.notifyChange("updating")},e.prototype.has=function(t){return this._queue.has(t)},e.prototype.isOngoing=function(t){return this._onGoingGraphic&&this._onGoingGraphic.graphic===t},e.prototype.push=function(t,e,i){if(!this._queue.has(t)){var r={graphic:t,addOrUpdate:e,timestamp:i||this._timestamp};this._queueArray.push(r),this._queue.set(t,r),this._scheduleNext(),this.notifyChange("updating")}},e.prototype.refresh=function(){this._timestamp=Date.now(),this.reset()},e.prototype.reset=function(){var t=this._onGoingGraphic;if(t){var e=t.graphic,i=t.addOrUpdate;this.push(e,i,this._timestamp)}},e.prototype._finalize=function(){this._onGoingGraphic=null,this._onGoingPromise=null,this.notifyChange("updating"),this._scheduleNext()},e.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)},e.prototype._scheduleNext=function(){this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingGraphic||(this._scheduledNextHandle=o.schedule(this._next))},e.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingGraphic)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var t=this._peek(),e=t.graphic,i=t.addOrUpdate;this._queue.delete(e),this._onGoingGraphic=t,this._onGoingPromise=this.process(e,i,this._timestamp),this._onGoingPromise.then(this._finalize,this._finalize),this.notifyChange("updating")}},e.prototype._peek=function(){return 0===this._queueArray.length?null:this._queueArray.pop()},r([s.property({readOnly:!0})],e.prototype,"length",null),r([s.property({readOnly:!0})],e.prototype,"updating",null),r([s.property({constructOnly:!0})],e.prototype,"process",void 0),r([s.subclass()],e)}(s.declared(n));e.default=a}.apply(null,r))||(t.exports=n)},1571:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(11),i(546),i(19),i(14),i(1533),i(37),i(158),i(69),i(1509),i(1572),i(1573),i(1519)],void 0===(n=function(t,e,i,r,n,o,s,a,h,c,l,u,d,p){function v(t,e,i,r,n){return f.minX=e,f.minY=i,f.maxX=r,f.maxY=n,t.search(f)}Object.defineProperty(e,"__esModule",{value:!0});var f={minX:0,minY:0,maxX:0,maxY:0},y=a.create(),g=[],m=function(){function t(t,e,i,o,a){this.renderer=o,this._graphics=a,this._index=s(9,n("csp-restrictions")?function(t){return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this._itemByGraphic=new r.default,this._currentLevel=-1/0,this._tileInfoView=t,this._uidFieldName=i;var h=t.getClosestInfoForScale(e);h&&(this._currentLevel=h.level,this._resolution=this._tileInfoView.getTileResolution(h.level))}return t.prototype.hitTest=function(t,e,i,r,n){t=l.normalizeMapX(t,this._tileInfoView.spatialReference);var s=.5*r*i;y[0]=t-s,y[1]=e-s,y[2]=t+s,y[3]=e+s;var u=.5*r*(i+50),d=v(this._index,t-u,e-u,t+u,e+u);if(!d||0===d.length)return[];for(var f,g={x:t,y:e},m=[],_=0,x=d;_<x.length;_++){var C=x[_];if(C.graphic.visible)switch(c.getJsonType(C.geometry)){case"esriGeometryPoint":var b=this._getSymbol(C.graphic);if(!b)continue;var w=C.geometry,T=void 0;if("text"===b.type){var I=b;T=p.getTextSymbolBounds(w.x,w.y,I,C.size,this._resolution,n)}else T=p.getMarkerSymbolBounds(w.x,w.y,b,this._resolution,n);h.polygonContainsPoint(T,g)&&m.push(C);break;case"esriGeometryPolyline":var A=this._getSymbol(C.graphic);if(!A)continue;f=1.5*r*window.devicePixelRatio*o.pt2px(A.width),p.isPointOnPolyline(C.geometry,t,e,f)&&m.push(C);break;case"esriGeometryEnvelope":var P=C.geometry,R=a.fromValues(P.xmin,P.ymin,P.xmax,P.ymax);a.intersects(R,y)&&m.push(C);break;case"esriGeometryPolygon":h.polygonContainsPoint(C.geometry,g)&&m.push(C);break;case"esriGeometryMultipoint":var S=this._getSymbol(C.graphic);if(!S)continue;for(var L=C.geometry.points,M=void 0,E=0;E<L.length;E++){if("text"===S.type){I=S;M=p.getTextSymbolBounds(L[E][0],L[E][1],I,C.size,this._resolution,n)}else M=p.getMarkerSymbolBounds(L[E][0],L[E][1],S,this._resolution,n);if(h.polygonContainsPoint(M,g)){m.push(C);break}}}}return m.sort(function(t,e){var i=p.graphicGeometryToNumber(t.graphic),r=p.graphicGeometryToNumber(e.graphic);return i===r?e.zorder-t.zorder:i-r}),m.map(function(t){return t.graphic})},t.prototype.getGraphicsData=function(t,e){var r=v(this._index,t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3]);if(0===r.length||0===e.length)return[];r.sort(function(t,e){return t.zorder-e.zorder}),r[0].insertAfter=-1;for(var n=1;n<r.length;n++)r[n].insertAfter=r[n-1].graphic.uid;r.sort(function(t,e){return t.graphic.uid-e.graphic.uid}),e.sort(function(t,e){return t.uid-e.uid});for(var o,s=0,a=0,h=[],c={originPosition:"upperLeft",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]},l=0,u=e;l<u.length;l++){var p=u[l];for(a=-2;s<r.length;)if(o=r[s],s++,p.uid===o.graphic.uid){a=o.insertAfter;break}if(o.geometry&&-2!==a){var f=o.getGeometryQuantized(c),y=i({},o.graphic.attributes);y[this._uidFieldName]=p.uid,h.push({centroid:d.default.getCentroidQuantized(o,c,this.renderer,this._scale),geometry:f,attributes:y,symbol:p.symbol,insertAfter:a})}}return h},t.prototype.getGraphicData=function(t,e){var r=this._itemByGraphic.get(e);if(!r)return null;var n=v(this._index,t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3]);n.sort(function(t,e){return t.zorder-e.zorder});var o=n.indexOf(r),s=0===o||-1===o?-1:n[o-1].graphic.uid,a={originPosition:"upperLeft",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]},h=r.getGeometryQuantized(a),c=i({},r.graphic.attributes);return c[this._uidFieldName]=e.uid,{centroid:d.default.getCentroidQuantized(r,a,this.renderer,this._scale),geometry:h,attributes:c,symbol:e.symbol,insertAfter:s}},t.prototype.queryTileData=function(t){var e=50*t.resolution,i=a.pad(t.bounds,e,a.create()),r=v(this._index,i[0],i[1],i[2],i[3]),n=[];return this._createTileGraphics(n,r,{originPosition:"upperLeft",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]}),n},t.prototype.has=function(t){return this._itemByGraphic.has(t)},t.prototype.getBounds=function(t){return this._itemByGraphic.has(t)?this._itemByGraphic.get(t).bounds:null},t.prototype.add=function(t,e,i){if(t){var r=d.default.acquire(t,i,e,this.renderer,this._resolution,this._scale,this._tileInfoView.spatialReference);return this._itemByGraphic.set(t,r),i&&this._index.insert(r),r.bounds}},t.prototype.remove=function(t){if(this._itemByGraphic.has(t)){var e=this._itemByGraphic.get(t);this._index.remove(e),this._itemByGraphic.delete(t)}},t.prototype.updateZ=function(){for(var t,e,i=this._graphics.items,r=0;r<i.length;r++)e=i[r],(t=this._itemByGraphic.get(e))&&(t.zorder=r)},t.prototype.update=function(t,e,i){var r=this._itemByGraphic.get(t),n=a.clone(r.bounds);return r.size[0]=r.size[1]=0,this._index.remove(r),r.set(t,i,e,this.renderer,this._resolution,this._scale,this._tileInfoView.spatialReference),i&&this._index.insert(r),{oldBounds:n,newBounds:r.bounds}},t.prototype.updateLevel=function(t){var e=this;if(this._currentLevel!==t){this._currentLevel=t;var i=this._tileInfoView.getTileResolution(t);this._resolution=i,this._scale=this._tileInfoView.getTileScale({level:t,row:0,col:0,world:0}),this._index.clear();var r=this._itemByGraphic.values();g.length=0,u.forEachIter(r,function(t){t.updateBounds(e.renderer,e._resolution,e._scale,e._tileInfoView.spatialReference),t.geometry&&g.push(t)}),this._index.load(g)}},t.prototype.clear=function(){this._itemByGraphic.clear(),this._index.clear()},t.prototype._createTileGraphics=function(t,e,r){var n=this._uidFieldName;e.sort(function(t,e){return t.zorder-e.zorder});for(var o,s,a,h,c=0;c<e.length;c++){o=(a=e[c]).graphic,s=a.getGeometryQuantized(r),h=0===c?-1:e[c-1].graphic.uid;var l=i({},a.graphic.attributes);l[n]=o.uid,t.push({centroid:d.default.getCentroidQuantized(a,r,this.renderer,this._scale),geometry:s,attributes:l,symbol:o.symbol,insertAfter:h})}},t.prototype._getSymbol=function(t){return t.symbol?t.symbol:this.renderer?this.renderer.getSymbol(t,{scale:this._scale}):null},t}();e.default=m}.apply(null,r))||(t.exports=n)},1572:function(t,e,i){var r,n;r=[i.dj.c(t.i),e],void 0===(n=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.forEachIter=function(t,e){for(;;){var i=t.next(),r=i.value;if(i.done)return;e(r)}}}.apply(null,r))||(t.exports=n)},1573:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(37),i(372),i(69),i(558),i(1519)],void 0===(n=function(t,e,i,r,n,o,s){Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){this.bounds=i.create(),this.graphic=null,this.size=[0,0,0,0]}return t.acquire=function(e,i,r,n,o,s,a){var h;return void 0===e&&(e=null),0===t._pool.length?h=new t:(h=t._pool.pop(),this._set.delete(h)),h.acquire(e,i,r,n,o,s,a),h},t.release=function(t){t&&!this._set.has(t)&&(t.release(),this._pool.push(t),this._set.add(t))},t.getCentroidQuantized=function(t,e,i,a){if(n.isPolygon(t.geometry)){var h=t.graphic.symbol;if(!h&&i&&(h=i.getSymbol(t.graphic,{scale:a})),!h)return null;if(s.isMarkerSymbol(h.type)){var c=r.polygonCentroid(t.geometry);return o.quantizePoint(e,{},{x:c[0],y:c[1]},!1,!1)}}return null},t.prototype.acquire=function(t,e,i,r,n,o,s){void 0===t&&(t=null),t&&this.set(t,e,i,r,n,o,s)},t.prototype.release=function(){this.graphic=null,this.geometry=null},t.prototype.set=function(t,e,i,r,n,o,a){this.graphic=t,this.geometry=e,s.getBounds(this.bounds,this.size,t,e,i,r,n,o,a)},t.prototype.updateBounds=function(t,e,i,r){s.getBounds(this.bounds,this.size,this.graphic,this.geometry,null,t,e,i,r)},t.prototype.getGeometryQuantized=function(t){if(n.isPolygon(this.geometry)){var e=this.geometry.rings;if(1===e.length&&2===e[0].length)return o.quantizeGeometry(t,{paths:[[e[0][0],e[0][1]]]})}return o.quantizeGeometry(t,this.geometry)},t._pool=[],t._set=new Set,t}();e.default=a}.apply(null,r))||(t.exports=n)},1595:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(5),i(170),i(548),i(53)],void 0===(n=function(t,e,i,r,n,o){function s(t,e,i){var r={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,flipped:!0};return e&&i&&(r.width=e,r.height=i),new o(t,r)}function a(t){return t.updateTexture()}function h(t){l.has(t)&&(c.splice(c.indexOf(t),1),l.delete(t))}Object.defineProperty(e,"__esModule",{value:!0});var c=[],l=new r.default,u=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._height=void 0,i.pixelRatio=1,i.resolution=0,i.rotation=0,i._source=null,i._width=void 0,i.x=0,i.y=0,i.source=e,i.requestRender=i.requestRender.bind(i),i}return i(e,t),Object.defineProperty(e.prototype,"height",{get:function(){return void 0!==this._height?this._height:this.sourceHeight},set:function(t){this._height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){this._source=t,this.invalidateTexture()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceHeight",{get:function(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceWidth",{get:function(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return void 0!==this._width?this._width:this.sourceWidth},set:function(t){this._width=t},enumerable:!0,configurable:!0}),e.prototype.attach=function(){return a(this),t.prototype.attach.call(this),!0},e.prototype.detach=function(){this._texture.dispose(),this._texture=null,h(this)},e.prototype.invalidateTexture=function(){this.attached?a(this):h(this)},e.prototype.updateTexture=function(){this._texture||(this.source?this._texture=s(this.stage.context,this.sourceWidth,this.sourceHeight):this._texture=s(this.stage.context));var t=this.source;t?(this._texture.resize(this.sourceWidth,this.sourceHeight),function(t){return t&&"render"in t}(t)?this._texture.setData(function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,t.render(e.getContext("2d")),e}(t)):function(t){return t&&!("render"in t)}(t)&&this._texture.setData(t),this.sourceWidth===this.width&&this.sourceHeight===this.height||this._texture.generateMipmap(),this.ready(),this.requestRender()):this._texture.setData(null)},e.prototype.setSamplingMode=function(t){if(this._texture){if(!this._texture.descriptor.hasMipmap)return void this._texture.setSamplingMode(t);var e;e=9728===t?9985:9729===t?9987:t,this._texture.setSamplingMode(e)}},e.prototype.bind=function(t){this._texture&&this.stage.context.bindTexture(this._texture,t)},e.prototype.doRender=function(t){if(this.source&&this.width>0&&this.isReady){var e=this.stage.painter,i=t.state.resolution,r=this.resolution/this.pixelRatio/i;r<.05||e.drawBitmap(t,this,r)}},e}(n.DisplayObject);e.Bitmap=u}.apply(null,r))||(t.exports=n)},1599:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(1528)],void 0===(n=function(t,e,i){return function(){function t(t,e,i,r,n,o,s,a){this._glyphItems=t,this._maxWidth=e,this._lineHeight=i,this._letterSpacing=r,this._offset=n,this._hAnchor=o,this._vAnchor=s,this._justify=a}return t.prototype.getShaping=function(t,e){for(var i=this._letterSpacing,r=this._lineHeight,n=this._justify,o=this._maxWidth,s=[],a=0,h=0,c=0,l=0,u=-1,d=0,p=-1,v=t.length,f=0;f<v;f++){var y=t.charCodeAt(f);if(10!==y){for(var g=void 0,m=0,_=this._glyphItems;m<_.length&&!(g=_[m][y]);m++);if(g){if(s.push({codePoint:y,x:a,y:h,glyphMosaicItem:g}),a+=g.metrics.advance+i,0<o&&o<a&&0<=p){var x=p+1;b=s[x].x,d=Math.max(b,d);for(var C=x;C<s.length;C++)e?s[C].y-=r:s[C].y+=r,s[C].x-=b;n&&this._applyJustification(s,l,p),e?h-=r:h+=r,a-=b,++c,l=x,p=-1}++u,32===y&&(p=s.length-1)}}else{if(f===v-1)continue;if(l<=u){var b=(w=s[u]).x+w.glyphMosaicItem.metrics.advance;d=Math.max(b,d),n&&this._applyJustification(s,l,u),l=s.length}e?h-=r:h+=r,a=0,++c}}if(l<=u){var w,T=(w=s[u]).x+w.glyphMosaicItem.metrics.advance;d=Math.max(d,T),n&&this._applyJustification(s,l,u)}if(0<s.length){var I=(n-this._hAnchor)*d,A=(-this._vAnchor*(c+1)+.5)*r;e&&c&&(A+=c*r),I+=this._offset[0],A+=this._offset[1];for(var P=0,R=s;P<R.length;P++){var S=R[P];S.x+=I,S.y+=A}}return s},t.getBox=function(t){if(!t.length)return null;for(var e=1/0,i=1/0,r=0,n=0,o=0,s=t;o<s.length;o++){var a=s[o],h=a.glyphMosaicItem.metrics,c=h.height,l=h.left,u=h.top,d=h.width,p=a.x,v=a.y-(c-Math.abs(u)),f=p+d+l,y=v+c;e=Math.min(e,p),r=Math.max(r,f),i=Math.min(i,v),n=Math.max(n,y)}return{x:e,y:i,width:r-e,height:n-i}},t.addDecoration=function(t,e){var r=t.length;if(0!==r){for(var n=t[0].x+t[0].glyphMosaicItem.metrics.left,o=t[0].y,s=1;s<r;s++){var a=t[s];if(a.y!==o){var h=t[s-1].x+t[s-1].glyphMosaicItem.metrics.left+t[s-1].glyphMosaicItem.metrics.width;t.push({codePoint:0,x:n,y:o+e-3,glyphMosaicItem:{sdf:!0,rect:new i(4,0,4,8),metrics:{width:h-n,height:8,left:0,top:0,advance:0},page:0}}),o=a.y,n=a.x+a.glyphMosaicItem.metrics.left}}var c=t[r-1].x+t[r-1].glyphMosaicItem.metrics.left+t[r-1].glyphMosaicItem.metrics.width;t.push({codePoint:0,x:n,y:o+e-3,glyphMosaicItem:{sdf:!0,rect:new i(4,0,4,8),metrics:{width:c-n,height:8,left:0,top:0,advance:0},page:0}})}},t.prototype._applyJustification=function(t,e,i){for(var r=t[i],n=r.glyphMosaicItem.metrics.advance,o=(r.x+n)*this._justify,s=e;s<=i;s++)t[s].x-=o},t}()}.apply(null,r))||(t.exports=n)},1600:function(t,e,i){var r,n;r=[i(30),i(351),i(1527)],void 0===(n=function(t,e,i){t.getObject("string",!0,dojox);var r=e("dojox.string.BidiEngine",i,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(t,e,i){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(function(t,e,i){T=[],A=[];for(var r=0;r<i;r++)t[r]=r,e[r]=r,T[r]=r}(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(e,i))return t;e=this.inputFormat,i=this.outputFormat;var r=t,s=P,a=x(e.charAt(1)),p=x(i.charAt(1)),v=("I"===e.charAt(0)?"L":e.charAt(0))+a,f=("I"===i.charAt(0)?"L":i.charAt(0))+p,R=e.charAt(2)+i.charAt(2);s.defInFormat=v,s.defOutFormat=f,s.defSwap=R;var S=function t(e,i,r,s,a){var c=function(t,e,i){void 0===e.inFormat&&(e.inFormat=i.defInFormat);void 0===e.outFormat&&(e.outFormat=i.defOutFormat);void 0===e.swap&&(e.swap=i.defSwap);if(e.inFormat===e.outFormat)return e;var r,o=e.inFormat.substring(0,1),s=e.inFormat.substring(1,4),a=e.outFormat.substring(0,1),h=e.outFormat.substring(1,4);"C"===s.charAt(0)&&(r=n(t),s="ltr"===r||"rtl"===r?r.toUpperCase():"L"===e.inFormat.charAt(2)?"LTR":"RTL",e.inFormat=o+s);"C"===h.charAt(0)&&("rtl"===(r=n(t))?h="RTL":"ltr"===r?(r=function(t){var e=t.split("");return e.reverse(),n(e.join(""))}(t),h=r.toUpperCase()):h="L"===e.outFormat.charAt(2)?"LTR":"RTL",e.outFormat=a+h);return e}(e,{inFormat:i,outFormat:r,swap:s},a);if(c.inFormat===c.outFormat)return e;i=c.inFormat;r=c.outFormat;s=c.swap;var l=i.substring(0,1),u=i.substring(1,4),d=r.substring(0,1),p=r.substring(1,4);a.inFormat=i;a.outFormat=r;a.swap=s;if("L"===l&&"VLTR"===r){if("LTR"===u)return a.dir=L,o(e,a);if("RTL"===u)return a.dir=M,o(e,a)}if("V"===l&&"V"===d)return a.dir="RTL"===u?M:L,h(e,a);if("L"===l&&"VRTL"===r)return"LTR"===u?(a.dir=L,e=o(e,a)):(a.dir=M,e=o(e,a)),h(e);if("VLTR"===i&&"LLTR"===r)return a.dir=L,o(e,a);if("V"===l&&"L"===d&&u!==p)return e=h(e),"RTL"===u?t(e,"LLTR","VLTR",s,a):t(e,"LRTL","VRTL",s,a);if("VRTL"===i&&"LRTL"===r)return t(e,"LRTL","VRTL",s,a);if("L"===l&&"L"===d){var v=a.swap;return a.swap=v.substr(0,1)+"N","RTL"===u?(a.dir=M,e=o(e,a),a.swap="N"+v.substr(1,2),a.dir=L,e=o(e,a)):(a.dir=L,e=o(e,a),a.swap="N"+v.substr(1,2),e=t(e,"VLTR","LRTL",a.swap,a)),e}}(t,v,f,R,s),E=!1;return"R"===i.charAt(1)?E=!0:"C"!==i.charAt(1)&&"D"!==i.charAt(1)||(E=this.checkContextual(S)),this.sourceToTarget=T,this.targetToSource=function(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[t[i]]=i;return e}(this.sourceToTarget),I=this.targetToSource,r=e.charAt(3)===i.charAt(3)?S:"S"===i.charAt(3)?function(t,e,i){if(0===e.length)return;void 0===t&&(t=!0);void 0===i&&(i=!0);var r=(e=String(e)).split(""),n=0,o=1,s=r.length;t||(n=r.length-1,o=-1,s=1);for(var a=function(t,e,i,r,n){for(var o=0,s=[],a=0,h=e;h*i<r;h+=i)if(l(t[h])||_(t[h])){if("ل"===t[h]&&d(t,h+i,i,r)){t[h]=b(t[h+i],0===o?N:V),C(t,h+=i,i,r),n&&(s[a]=h,a++),o=0;continue}var c=t[h];1===o?t[h]=u(t,h+i,i,r)?g(t[h]):m(t[h],F):!0===u(t,h+i,i,r)?t[h]=m(t[h],j):t[h]=m(t[h],D),_(c)||(o=1),!0===y(c)&&(o=0)}else o=0;return s}(r,n,o,s,i),h="",p=0;p<r.length;p++)i&&c(a,a.length,p)>-1?(w(I,p,!t,-1),T.splice(p,1)):h+=r[p];return h}(E,S,!0):function(t,e,i){if(0===t.length)return;void 0===i&&(i=!0);void 0===e&&(e=!0);t=String(t);var r="",n=[];n=t.split("");for(var o=0;o<t.length;o++){var s=!1;if(n[o]>="ﹰ"&&n[o]<"\ufeff"){var a=t.charCodeAt(o);n[o]>="ﻵ"&&n[o]<="ﻼ"?(e?(o>0&&i&&" "===n[o-1]?r=r.substring(0,r.length-1)+"ل":(r+="ل",s=!0),r+=U[(a-65269)/2]):(r+=U[(a-65269)/2],r+="ل",o+1<t.length&&i&&" "===n[o+1]?o++:s=!0),s&&(w(I,o,!0,1),T.splice(o,0,T[o]))):r+=z[a-65136]}else r+=n[o]}return r}(S,E,!0),this.sourceToTarget=T,this.targetToSource=I,this.levels=A,r},_inputFormatSetter:function(t){if(!E.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t},_outputFormatSetter:function(t){if(!E.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t},checkParameters:function(t,e){return t?this.set("inputFormat",t):t=this.inputFormat,e?this.set("outputFormat",e):e=this.outputFormat,t!==e},checkContextual:function(t){var e=n(t);if("ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(t){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e},hasBidiChar:function(t){return O.test(t)}});function n(t){var e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function o(t,e){var i=t.split(""),r=[];return s(i,r,e),function(t,e,i){if(0===i.hiLevel||i.swap.substr(0,1)===i.swap.substr(1,2))return;for(var r=0;r<t.length;r++)1===e[r]&&(t[r]=f(t[r]))}(i,r,e),p(2,i,r,e),p(1,i,r,e),A=r,i.join("")}function s(t,e,i){var r=t.length,n=i.dir?W:Y,o=null,s=null,h=null,c=0,l=null,u=-1,d=null,p=null,f=[],y=[];for(i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1,d=0;d<r;d++)f[d]=a(t[d]);for(p=0;p<r;p++){if(o=c,y[p]=s=v(t,f,y,p,i),l=240&(c=n[o][s]),c&=15,e[p]=h=n[c][R],l>0)if(16===l){for(d=u;d<p;d++)e[d]=1;u=-1}else u=-1;if(n[c][S])-1===u&&(u=p);else if(u>-1){for(d=u;d<p;d++)e[d]=h;u=-1}f[p]===tt&&(e[p]=0),i.hiLevel|=h}i.hasUbatS&&function(t,e,i,r){for(var n=0;n<i;n++)if(t[n]===et){e[n]=r.dir;for(var o=n-1;o>=0&&t[o]===rt;o--)e[o]=r.dir}}(f,e,r,i)}function a(t){var e=t.charCodeAt(0),i=ht[e>>8];return i<at?i:ct[i-at][255&e]}function h(t,e){var i=t.split("");if(e){var r=[];s(i,r,e),A=r}return i.reverse(),T.reverse(),i.join("")}function c(t,e,i){for(var r=0;r<e;r++)if(t[r]===i)return r;return-1}function l(t){for(var e=0;e<X.length;e++)if(t>=X[e]&&t<=H[e])return!0;return!1}function u(t,e,i,r){for(;e*i<r&&_(t[e]);)e+=i;return!!(e*i<r&&l(t[e]))}function d(t,e,i,r){for(;e*i<r&&_(t[e]);)e+=i;var n=" ";if(!(e*i<r))return!1;n=t[e];for(var o=0;o<U.length;o++)if(U[o]===n)return!0;return!1}function p(t,e,i,r){if(!(r.hiLevel<t)){if(1===t&&r.dir===M&&!r.hasUbatB)return e.reverse(),void T.reverse();for(var n,o,s,a,h=e.length,c=0;c<h;){if(i[c]>=t){for(n=c+1;n<h&&i[n]>=t;)n++;for(o=c,s=n-1;o<s;o++,s--)a=e[o],e[o]=e[s],e[s]=a,a=T[o],T[o]=T[s],T[s]=a;c=n}c++}}}function v(t,e,i,r,n){var o=e[r];return{UBAT_L:function(){return n.lastArabic=!1,J},UBAT_R:function(){return n.lastArabic=!1,Q},UBAT_ON:function(){return $},UBAT_AN:function(){return K},UBAT_EN:function(){return n.lastArabic?K:Z},UBAT_AL:function(){return n.lastArabic=!0,n.hasUbatAl=!0,Q},UBAT_WS:function(){return $},UBAT_CS:function(){var t,o;return r<1||r+1>=e.length||(t=i[r-1])!==Z&&t!==K||(o=e[r+1])!==Z&&o!==K?$:(n.lastArabic&&(o=K),o===t?o:$)},UBAT_ES:function(){return(r>0?i[r-1]:tt)===Z&&r+1<e.length&&e[r+1]===Z?Z:$},UBAT_ET:function(){if(r>0&&i[r-1]===Z)return Z;if(n.lastArabic)return $;for(var t=r+1,o=e.length;t<o&&e[t]===nt;)t++;return t<o&&e[t]===Z?Z:$},UBAT_NSM:function(){if("VLTR"===n.inFormat){for(var o=e.length,s=r+1;s<o&&e[s]===ot;)s++;if(s<o){var a=t[r],h=a>=1425&&a<=2303||64286===a,c=e[s];if(h&&(c===Q||c===it))return Q}}return r<1||e[r-1]===tt?$:i[r-1]},UBAT_B:function(){return n.lastArabic=!0,n.hasUbatB=!0,n.dir},UBAT_S:function(){return n.hasUbatS=!0,$},UBAT_LRE:function(){return n.lastArabic=!1,$},UBAT_RLE:function(){return n.lastArabic=!1,$},UBAT_LRO:function(){return n.lastArabic=!1,$},UBAT_RLO:function(){return n.lastArabic=!1,$},UBAT_PDF:function(){return n.lastArabic=!1,$},UBAT_BN:function(){return $}}[st[o]]()}function f(t){for(var e,i=0,r=G.length-1;i<=r;)if(e=Math.floor((i+r)/2),t<G[e][0])r=e-1;else{if(!(t>G[e][0]))return G[e][1];i=e+1}return t}function y(t){for(var e=0;e<k.length;e++)if(k[e]===t)return!0;return!1}function g(t){for(var e=0;e<B.length;e++)if(t===B[e])return q[e];return t}function m(t,e){for(var i=0;i<B.length;i++)if(t===B[i])return e[i];return t}function _(t){return t>="ً"&&t<="ٕ"}function x(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":void 0}function C(t,e,i,r){for(;e*i<r&&_(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function b(t,e){for(var i=0;i<U.length;i++)if(t===U[i])return e[i];return t}function w(t,e,i,r){for(var n=0;n<t.length;n++)(t[n]>e||!i&&t[n]===e)&&(t[n]+=r)}var T=[],I=[],A=[],P={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},R=5,S=6,L=0,M=1,E=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,O=/[\u0591-\u06ff\ufb1d-\ufefc]/,G=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],U=["آ","أ","إ","ا"],N=["ﻵ","ﻷ","ﻹ","ﻻ"],V=["ﻶ","ﻸ","ﻺ","ﻼ"],B=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],D=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],F=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],q=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],j=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],k=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],z=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],X=["ء","ف"],H=["غ","ي"],Y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],W=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],J=0,Q=1,Z=2,K=3,$=4,tt=5,et=6,it=7,rt=8,nt=11,ot=12,st=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],at=100,ht=[at+0,J,J,J,J,at+1,at+2,at+3,Q,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,at+4,$,$,$,J,$,J,$,J,$,$,$,J,J,$,$,J,J,J,J,J,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,J,J,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,J,J,$,$,J,J,$,$,J,J,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,J,J,J,at+5,it,it,at+6,at+7],ct=[[18,18,18,18,18,18,18,18,18,et,tt,et,rt,tt,18,18,18,18,18,18,18,18,18,18,18,18,18,18,tt,tt,tt,et,rt,$,$,nt,nt,nt,$,$,$,$,$,10,9,10,9,9,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,9,$,$,$,$,$,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,$,$,$,$,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,$,$,$,18,18,18,18,18,18,tt,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,$,nt,nt,nt,nt,$,$,$,$,J,$,$,18,$,$,nt,nt,Z,Z,$,J,$,$,$,Z,J,$,$,$,$,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,J,J,J,J,J,J,J,J],[J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,$,$,$,$,$,$,$,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,$,J,J,J,J,J,J,J,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,J,$,$,$,$,$,$,$,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,Q,ot,Q,ot,ot,Q,ot,ot,Q,ot,$,$,$,$,$,$,$,$,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,$,$,$,$,$,Q,Q,Q,Q,Q,$,$,$,$,$,$,$,$,$,$,$],[K,K,K,K,$,$,$,$,it,nt,nt,it,9,it,$,$,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,it,$,$,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,K,K,K,K,K,K,K,K,K,K,nt,K,K,it,it,it,ot,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,ot,ot,ot,ot,ot,ot,ot,K,$,ot,ot,ot,ot,ot,ot,it,it,ot,ot,$,ot,ot,ot,ot,it,it,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,it,it,it,it,it,it],[it,it,it,it,it,it,it,it,it,it,it,it,it,it,$,it,it,ot,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,$,$,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,it,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,ot,ot,ot,ot,ot,ot,ot,ot,ot,Q,Q,$,$,$,$,Q,$,$,$,$,$],[rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,18,18,18,J,Q,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,rt,tt,13,14,15,16,17,9,nt,nt,nt,nt,nt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,9,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,rt,18,18,18,18,18,$,$,$,$,$,18,18,18,18,18,18,Z,J,$,$,Z,Z,Z,Z,Z,Z,10,10,$,$,$,J,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,10,10,$,$,$,$,J,J,J,J,J,J,J,J,J,J,J,J,J,$,$,$,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,nt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[J,J,J,J,J,J,J,$,$,$,$,$,$,$,$,$,$,$,$,J,J,J,J,J,$,$,$,$,$,Q,ot,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,10,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,$,Q,Q,Q,Q,Q,$,Q,$,Q,Q,$,Q,Q,$,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it],[ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,ot,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,ot,ot,ot,ot,ot,ot,ot,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,9,$,9,$,$,9,$,$,$,$,$,$,$,$,$,nt,$,$,10,10,$,$,$,$,$,nt,nt,$,$,$,$,$,it,it,it,it,it,$,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,it,$,$,18],[$,$,$,nt,nt,nt,$,$,$,$,$,10,9,10,9,9,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,9,$,$,$,$,$,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,$,$,$,$,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,$,$,$,$,$,$,$,$,$,$,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,$,$,$,J,J,J,J,J,J,$,$,J,J,J,J,J,J,$,$,J,J,J,J,J,J,$,$,J,J,J,$,$,$,nt,nt,$,$,$,nt,nt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];return r}.apply(null,r))||(t.exports=n)},1601:function(t,e,i){var r,n;r=[i.dj.c(t.i),e],void 0===(n=function(t,e){var i,r,n,o;Object.defineProperty(e,"__esModule",{value:!0}),(r=i=e.VectorRole||(e.VectorRole={}))[r.ENTRY=1]="ENTRY",r[r.EXIT=2]="EXIT",r[r.CAP=3]="CAP",(o=n=e.CapPosition||(e.CapPosition={}))[o.START=1]="START",o[o.END=2]="END",e.SYSTEM_MAG_LIMIT=3.8,e.MITER_SAFE_RADS=2*Math.acos(1/e.SYSTEM_MAG_LIMIT);var s=e.SYSTEM_MAG_LIMIT*e.SYSTEM_MAG_LIMIT,a=-1,h=8/(2*Math.PI);function c(t){var e,i={items:new Array,count:0};for(e=0;e<t;++e)i.items.push(void 0);return i}e.allocTriangles=function(t){var e,i={items:new Array,count:0};for(e=0;e<t;++e)i.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return i},e.allocExtrudeVectors=function(){var t=function(t){var e,i={items:new Array,count:0};for(e=0;e<30;++e)i.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});return i}(),e={};return e[i.ENTRY]=c(20),e[i.EXIT]=c(20),e[i.CAP]=c(20),{vectors:t,lists:e}},e.copyExtrudeVectors=function(t,e){var r;for(r=0;r<e.vectors.count;++r)t.vectors.items[r].vector[0]=e.vectors.items[r].vector[0],t.vectors.items[r].vector[1]=e.vectors.items[r].vector[1],t.vectors.items[r].texCoords[0]=e.vectors.items[r].texCoords[0],t.vectors.items[r].texCoords[1]=e.vectors.items[r].texCoords[1],t.vectors.items[r].direction[0]=e.vectors.items[r].direction[0],t.vectors.items[r].direction[1]=e.vectors.items[r].direction[1],t.vectors.items[r].base=e.vectors.items[r].base;t.vectors.count=e.vectors.count;var n=e.lists[i.ENTRY],o=t.lists[i.ENTRY],s=e.lists[i.EXIT],a=t.lists[i.EXIT],h=e.lists[i.CAP],c=t.lists[i.CAP];for(r=0;r<n.count;++r)o.items[r]=n.items[r];for(o.count=n.count,r=0;r<s.count;++r)a.items[r]=s.items[r];for(a.count=s.count,r=0;r<h.count;++r)c.items[r]=h.items[r];c.count=h.count,t.capCenter=e.capCenter};var l={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};function u(t,e){l.vector[0]=t.vector[0],l.vector[1]=t.vector[1],l.texCoords[0]=t.texCoords[0],l.texCoords[1]=t.texCoords[1],l.direction[0]=t.direction[0],l.direction[1]=t.direction[1],l.base=t.base,t.vector[0]=e.vector[0],t.vector[1]=e.vector[1],t.texCoords[0]=e.texCoords[0],t.texCoords[1]=e.texCoords[1],t.direction[0]=e.direction[0],t.direction[1]=e.direction[1],t.base=e.base,e.vector[0]=l.vector[0],e.vector[1]=l.vector[1],e.texCoords[0]=l.texCoords[0],e.texCoords[1]=l.texCoords[1],e.direction[0]=l.direction[0],e.direction[1]=l.direction[1],e.base=l.base}e.swapExtrudeVectors=u;var d,p=[];for(d=0;d<32;++d)p.push([void 0,void 0]);var v=function(t){var e,i={items:new Array,count:0};for(e=0;e<8;++e)i.items.push([void 0,void 0]);return i}();function f(t,e){return t[0]*e[0]+t[1]*e[1]}function y(t){return Math.sqrt(f(t,t))}function g(t,e){var i=y(e);return t[0]=e[0]/i,t[1]=e[1]/i,t}function m(t,e){return t[0]=-e[1],t[1]=e[0],t}function _(t,e){return t[0]*e[1]-t[1]*e[0]}function x(t,e){return t[0]=-e[0],t[1]=-e[1],t}function C(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function b(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function w(t,e,i){return r=t,o=i,((n=e)[0]-r[0])*(o[1]-r[1])-(o[0]-r[0])*(n[1]-r[1])<0;var r,n,o}function T(t,e){var i=f(t,e);return.999<i?0:i<-.999?Math.PI:Math.acos(i)}function I(t,e,i,r,n){if(0!==r){var o,s=y(e),a=(n?-1:1)*T(C(p[0],e,1/s),C(p[1],i,1/s))/r,h=Math.cos(a),c=Math.sin(a),l=e[0],u=e[1];for(o=0;o<r-1;++o){var d=l;l=h*d-c*u,u=c*d+h*u,t.items[o][0]=l,t.items[o][1]=u}t.count=r-1}else t.count=0}function A(t){var e,i=t.count,r=Math.floor(i/2);for(e=0;e<r;++e){var n=t.items[e];t.items[e]=t.items[i-e-1],t.items[i-e-1]=n}}e.length=y,e.normalize=g,e.getNumberOfSlices=function(t){return Math.max(Math.round(t*h),1)},e.getRads=T,e.reverse=A;var P=[void 0,void 0],R=[void 0,void 0],S=[0,0],L=[0,0],M=[0,0],E=[0,0],O=Math.cos(Math.PI/4),G=Math.sin(Math.PI/4),U=Math.sqrt(2),N=function(){function t(t){this._distanceAlongCorrection=t.distanceAlongCorrection}return t.prototype.bridge=function(t,e,r){var n,o,s,a,h=e.vectors,c=e.lists[i.EXIT],l=r.vectors,d=r.lists[i.ENTRY];if(c.count===d.count+1)n=c.items,o=h.items,s=d.items,a=l.items;else if(d.count===c.count+1)n=d.items,o=l.items,s=c.items,a=h.items;else{if(c.count!==d.count)return console.error("Cannot bridge "+c.count+" to "+d.count+"."),void(t.count=0);n=d.items,o=l.items,s=c.items,a=h.items}var p,v=c.count+d.count-2;for(t.count=v,P[0]=n,P[1]=s,R[0]=o,R[1]=a,p=0;p<v;++p){var f=t.items[p],y=(p+0)%2,g=Math.floor((p+0)/2),m=R[y][P[y][g]];f.v1.vector[0]=m.vector[0],f.v1.vector[1]=m.vector[1],f.v1.texCoords[0]=m.texCoords[0],f.v1.texCoords[1]=m.texCoords[1],f.v1.direction[0]=m.direction[0],f.v1.direction[1]=m.direction[1],f.v1.base=m.base;var _=(p+1)%2,x=Math.floor((p+1)/2),C=R[_][P[_][x]];f.v2.vector[0]=C.vector[0],f.v2.vector[1]=C.vector[1],f.v2.texCoords[0]=C.texCoords[0],f.v2.texCoords[1]=C.texCoords[1],f.v2.direction[0]=C.direction[0],f.v2.direction[1]=C.direction[1],f.v2.base=C.base;var b=(p+2)%2,T=Math.floor((p+2)/2),I=R[b][P[b][T]];f.v3.vector[0]=I.vector[0],f.v3.vector[1]=I.vector[1],f.v3.texCoords[0]=I.texCoords[0],f.v3.texCoords[1]=I.texCoords[1],f.v3.direction[0]=I.direction[0],f.v3.direction[1]=I.direction[1],f.v3.base=I.base;var A=f.v1.base&&f.v1.base.point||S,O=f.v2.base&&f.v2.base.point||S,G=f.v3.base&&f.v3.base.point||S;L[0]=A[0]+f.v1.vector[0],L[1]=A[1]+f.v1.vector[1],M[0]=O[0]+f.v2.vector[0],M[1]=O[1]+f.v2.vector[1],E[0]=G[0]+f.v3.vector[0],E[1]=G[1]+f.v3.vector[1],w(L,M,E)||u(f.v2,f.v3)}},t.prototype.pie=function(t,e){if(0!==e.lists[i.CAP].count){if(1===e.lists[i.CAP].count)return console.error("A single vector is not enough to define a pie."),void(t.count=0);var r;for(t.count=e.lists[i.CAP].count-1,r=0;r<t.count;++r){var n=t.items[r],o=e.lists[i.CAP].items[r],s=e.vectors.items[o];n.v1.vector[0]=s.vector[0],n.v1.vector[1]=s.vector[1],n.v1.texCoords[0]=s.texCoords[0],n.v1.texCoords[1]=s.texCoords[1],n.v1.direction[0]=s.direction[0],n.v1.direction[1]=s.direction[1],n.v1.base=s.base;var a=e.lists[i.CAP].items[r+1],h=e.vectors.items[a];n.v2.vector[0]=h.vector[0],n.v2.vector[1]=h.vector[1],n.v2.texCoords[0]=h.texCoords[0],n.v2.texCoords[1]=h.texCoords[1],n.v2.direction[0]=h.direction[0],n.v2.direction[1]=h.direction[1],n.v2.base=h.base;var c=e.capCenter,l=e.vectors.items[c];n.v3.vector[0]=l.vector[0],n.v3.vector[1]=l.vector[1],n.v3.texCoords[0]=l.texCoords[0],n.v3.texCoords[1]=l.texCoords[1],n.v3.direction[0]=l.direction[0],n.v3.direction[1]=l.direction[1],n.v3.base=l.base;var d=n.v1.base&&n.v1.base.point||S,p=n.v2.base&&n.v2.base.point||S,v=n.v3.base&&n.v3.base.point||S;L[0]=d[0]+n.v1.vector[0],L[1]=d[1]+n.v1.vector[1],M[0]=p[0]+n.v2.vector[0],M[1]=p[1]+n.v2.vector[1],E[0]=v[0]+n.v3.vector[0],E[1]=v[1]+n.v3.vector[1],w(L,M,E)||u(n.v2,n.v3)}}else t.count=0},t.prototype.buttCap=function(t,e,i){this.fastMiterJoin(t,e,i)},t.prototype.roundCap=function(t,e,r,o,s,a){void 0===a&&(a=0),this.fastMiterJoin(t,e,r);var h=o===n.START?0:1,c=o===n.START?1:0;t.capCenter=t.vectors.count;var l=t.vectors.items[t.capCenter];l.vector[0]=0,l.vector[1]=0,l.texCoords[0]=0,l.texCoords[1]=0,l.direction[0]=0,l.direction[1]=0,++t.vectors.count,I(v,t.vectors.items[h].vector,t.vectors.items[c].vector,s,!1);var u=t.vectors.count,d=t.lists[i.CAP];d.items[0]=h;var p,f=t.vectors.items[h].texCoords[1],y=t.vectors.items[c].texCoords[1];for(p=0;p<v.count;++p){var g=a*(1-Math.abs(v.count/2-p)/(v.count/2)),m=f+p/(v.count-1)*(y-f),_=v.items[p],x=t.vectors.items[u+p];x.vector[0]=_[0],x.vector[1]=_[1],x.texCoords[0]=g,x.texCoords[1]=m,x.direction[0]=0,x.direction[1]=0,d.items[p+1]=u+p}d.items[v.count+1]=c,d.count=v.count+2,t.vectors.count=u+v.count},t.prototype.squareCap=function(t,e,i,r){this.fastMiterJoin(t,e,i);var o=r===n.START?0:1,s=r===n.START?1:0,a=p[0],h=p[1],c=p[2],l=p[3],u=p[4],d=t.vectors.items[o].vector;a[0]=O*d[0]-G*d[1],a[1]=G*d[0]+O*d[1],C(l,a,U),h[0]=O*a[0]-G*a[1],h[1]=G*a[0]+O*a[1],c[0]=O*h[0]-G*h[1],c[1]=G*h[0]+O*h[1],C(u,c,U);var v=t.vectors.items[o];v.vector[0]=l[0],v.vector[1]=l[1];var f=t.vectors.items[s];f.vector[0]=u[0],f.vector[1]=u[1]},t.prototype.squareCapForDashedLines=function(t,e,r,o){if(o===n.START){var s=m(p[0],r),a=x(p[4],s),h=p[1],c=p[2],l=p[3];h[0]=O*s[0]-G*s[1],h[1]=G*s[0]+O*s[1],c[0]=O*h[0]-G*h[1],c[1]=G*h[0]+O*h[1],l[0]=O*c[0]-G*c[1],l[1]=G*c[0]+O*c[1],(u=p[5])[0]=0,u[1]=0,t.capCenter=0,(d=t.vectors.items)[0].vector[0]=u[0],d[0].vector[1]=u[1],d[0].direction[0]=0,d[0].direction[1]=0,d[0].texCoords[0]=0,d[0].texCoords[1]=0,d[1].vector[0]=s[0],d[1].vector[1]=s[1],d[1].direction[0]=0,d[1].direction[1]=0,d[1].texCoords[0]=0,d[1].texCoords[1]=-1,d[2].vector[0]=h[0]*U,d[2].vector[1]=h[1]*U,d[2].direction[0]=0,d[2].direction[1]=0,d[2].texCoords[0]=-1,d[2].texCoords[1]=-1,d[3].vector[0]=l[0]*U,d[3].vector[1]=l[1]*U,d[3].direction[0]=0,d[3].direction[1]=0,d[3].texCoords[0]=-1,d[3].texCoords[1]=1,d[4].vector[0]=a[0],d[4].vector[1]=a[1],d[4].direction[0]=0,d[4].direction[1]=0,d[4].texCoords[0]=0,d[4].texCoords[1]=1,t.vectors.count=5,t.lists[i.CAP].count=4,t.lists[i.CAP].items[0]=1,t.lists[i.CAP].items[1]=2,t.lists[i.CAP].items[2]=3,t.lists[i.CAP].items[3]=4,t.lists[i.ENTRY].count=0,t.lists[i.EXIT].count=3,t.lists[i.EXIT].items[0]=1,t.lists[i.EXIT].items[1]=0,t.lists[i.EXIT].items[2]=4}else{var u,d;s=m(p[0],r),a=x(p[4],s),h=p[1],c=p[2],l=p[3],h[0]=O*a[0]-G*a[1],h[1]=G*a[0]+O*a[1],c[0]=O*h[0]-G*h[1],c[1]=G*h[0]+O*h[1],l[0]=O*c[0]-G*c[1],l[1]=G*c[0]+O*c[1],(u=p[5])[0]=0,u[1]=0,t.capCenter=0,(d=t.vectors.items)[0].vector[0]=u[0],d[0].vector[1]=u[1],d[0].direction[0]=0,d[0].direction[1]=0,d[0].texCoords[0]=0,d[0].texCoords[1]=0,d[1].vector[0]=a[0],d[1].vector[1]=a[1],d[1].direction[0]=0,d[1].direction[1]=0,d[1].texCoords[0]=0,d[1].texCoords[1]=1,d[2].vector[0]=h[0]*U,d[2].vector[1]=h[1]*U,d[2].direction[0]=0,d[2].direction[1]=0,d[2].texCoords[0]=1,d[2].texCoords[1]=1,d[3].vector[0]=l[0]*U,d[3].vector[1]=l[1]*U,d[3].direction[0]=0,d[3].direction[1]=0,d[3].texCoords[0]=1,d[3].texCoords[1]=-1,d[4].vector[0]=s[0],d[4].vector[1]=s[1],d[4].direction[0]=0,d[4].direction[1]=0,d[4].texCoords[0]=0,d[4].texCoords[1]=-1,t.vectors.count=5,t.lists[i.CAP].count=4,t.lists[i.CAP].items[0]=1,t.lists[i.CAP].items[1]=2,t.lists[i.CAP].items[2]=3,t.lists[i.CAP].items[3]=4,t.lists[i.ENTRY].count=3,t.lists[i.ENTRY].items[0]=4,t.lists[i.ENTRY].items[1]=0,t.lists[i.ENTRY].items[2]=1,t.lists[i.EXIT].count=0}},t.prototype.fastMiterJoin=function(t,e,r){var n=m(p[0],r),o=n,s=x(p[1],n),h=t.vectors.items[0];h.vector[0]=o[0],h.vector[1]=o[1],h.texCoords[0]=0,h.texCoords[1]=a,h.direction[0]=0,h.direction[1]=0;var c=t.vectors.items[1];c.vector[0]=s[0],c.vector[1]=s[1],c.texCoords[0]=0,c.texCoords[1]=1,c.direction[0]=0,c.direction[1]=0,t.vectors.count=2;var l=t.lists[i.ENTRY];l.items[0]=0,l.items[1]=1,l.count=2;var u=t.lists[i.EXIT];u.items[0]=0,u.items[1]=1,u.count=2,t.lists[i.CAP].count=0,t.capCenter=void 0},t.prototype.miterJoin=function(t,e,r){var n=m(p[0],e),o=m(p[1],r),s=p[2];s[0]=n[0]+o[0],s[1]=n[1]+o[1];var h=g(p[3],s),c=f(h,n);h=C(p[4],h,1/c);var l=x(p[5],h);if(this._distanceAlongCorrection){(v=t.vectors.items[0]).vector[0]=h[0],v.vector[1]=h[1],v.texCoords[0]=0,v.texCoords[1]=a,v.direction[0]=e[0],v.direction[1]=e[1],(y=t.vectors.items[1]).vector[0]=l[0],y.vector[1]=l[1],y.texCoords[0]=0,y.texCoords[1]=1,y.direction[0]=e[0],y.direction[1]=e[1];var u=t.vectors.items[2];u.vector[0]=h[0],u.vector[1]=h[1],u.texCoords[0]=0,u.texCoords[1]=a,u.direction[0]=r[0],u.direction[1]=r[1];var d=t.vectors.items[3];d.vector[0]=l[0],d.vector[1]=l[1],d.texCoords[0]=0,d.texCoords[1]=1,d.direction[0]=r[0],d.direction[1]=r[1],t.vectors.count=4,(_=t.lists[i.ENTRY]).items[0]=0,_.items[1]=1,_.count=2,(b=t.lists[i.EXIT]).items[0]=2,b.items[1]=3,b.count=2}else{var v,y,_,b;(v=t.vectors.items[0]).vector[0]=h[0],v.vector[1]=h[1],v.texCoords[0]=0,v.texCoords[1]=a,v.direction[0]=0,v.direction[1]=0,(y=t.vectors.items[1]).vector[0]=l[0],y.vector[1]=l[1],y.texCoords[0]=0,y.texCoords[1]=1,y.direction[0]=0,y.direction[1]=0,t.vectors.count=2,(_=t.lists[i.ENTRY]).items[0]=0,_.items[1]=1,_.count=2,(b=t.lists[i.EXIT]).items[0]=0,b.items[1]=1,b.count=2}t.lists[i.CAP].count=0,t.capCenter=void 0},t.prototype.bevelJoin=function(t,e,r,n){var o=n*n,h=_(e,r),c=0<h?[a,1]:[1,a],l=c[0],u=c[1],d=0<h?x(p[0],m(p[1],e)):m(p[2],e),v=0<h?x(p[3],m(p[4],r)):m(p[5],r),y=p[6];y[0]=d[0]+v[0],y[1]=d[1]+v[1];var w=g(p[7],y),T=x(p[8],w),I=f(w,d),P=_(w,d),R=Math.abs(P/I),S=1+R*R,L=S<s?[R,this._distanceAlongCorrection]:[Math.sqrt(s-1),!0],M=L[0],E=L[1],O=S<o?[R,this._distanceAlongCorrection]:[Math.sqrt(o-1),!0],G=O[0],U=O[1];if(U&&E){b((F=t.vectors.items[0]).vector,x(p[9],d),C(p[10],x(p[11],e),M)),F.texCoords[0]=0,F.texCoords[1]=l,F.direction[0]=this._distanceAlongCorrection?e[0]:0,F.direction[1]=this._distanceAlongCorrection?e[1]:0,b((q=t.vectors.items[1]).vector,x(p[12],v),C(p[13],r,M)),q.texCoords[0]=0,q.texCoords[1]=l,q.direction[0]=this._distanceAlongCorrection?r[0]:0,q.direction[1]=this._distanceAlongCorrection?r[1]:0,(V=t.vectors.items[2]).vector[0]=0,V.vector[1]=0,V.texCoords[0]=0,V.texCoords[1]=0,V.direction[0]=0,V.direction[1]=0,b((B=t.vectors.items[3]).vector,d,C(p[14],e,G)),B.texCoords[0]=0,B.texCoords[1]=u,B.direction[0]=this._distanceAlongCorrection?e[0]:0,B.direction[1]=this._distanceAlongCorrection?e[1]:0;var N=t.vectors.items[4];b(N.vector,v,C(p[15],x(p[16],r),G)),N.texCoords[0]=0,N.texCoords[1]=u,N.direction[0]=this._distanceAlongCorrection?r[0]:0,N.direction[1]=this._distanceAlongCorrection?r[1]:0,t.vectors.count=5,(j=t.lists[i.ENTRY]).items[0]=0,j.items[1]=2,j.items[2]=3,j.count=3,(k=t.lists[i.EXIT]).items[0]=1,k.items[1]=2,k.items[2]=4,k.count=3,S<o?((D=t.lists[i.CAP]).count=0,t.capCenter=void 0):((D=t.lists[i.CAP]).items[0]=3,D.items[1]=4,D.count=2,t.capCenter=2)}else if(!U&&E)b((F=t.vectors.items[0]).vector,x(p[9],d),C(p[10],x(p[11],e),M)),F.texCoords[0]=0,F.texCoords[1]=l,F.direction[0]=this._distanceAlongCorrection?e[0]:0,F.direction[1]=this._distanceAlongCorrection?e[1]:0,b((q=t.vectors.items[1]).vector,x(p[12],v),C(p[13],r,M)),q.texCoords[0]=0,q.texCoords[1]=l,q.direction[0]=this._distanceAlongCorrection?r[0]:0,q.direction[1]=this._distanceAlongCorrection?r[1]:0,(V=t.vectors.items[2]).vector[0]=0,V.vector[1]=0,V.texCoords[0]=0,V.texCoords[1]=0,V.direction[0]=0,V.direction[1]=0,C((B=t.vectors.items[3]).vector,w,1/I),B.texCoords[0]=0,B.texCoords[1]=u,B.direction[0]=0,B.direction[1]=0,t.vectors.count=4,(j=t.lists[i.ENTRY]).items[0]=0,j.items[1]=2,j.items[2]=3,j.count=3,(k=t.lists[i.EXIT]).items[0]=1,k.items[1]=2,k.items[2]=3,k.count=3,t.lists[i.CAP].count=0,t.capCenter=void 0;else if(U&&!E){var V,B,D;C((F=t.vectors.items[0]).vector,T,1/I),F.texCoords[0]=0,F.texCoords[1]=l,F.direction[0]=0,F.direction[1]=0,(q=t.vectors.items[1]).vector[0]=0,q.vector[1]=0,q.texCoords[0]=0,q.texCoords[1]=0,q.direction[0]=0,q.direction[1]=0,b((V=t.vectors.items[2]).vector,d,C(p[9],e,G)),V.texCoords[0]=0,V.texCoords[1]=u,V.direction[0]=this._distanceAlongCorrection?e[0]:0,V.direction[1]=this._distanceAlongCorrection?e[1]:0,b((B=t.vectors.items[3]).vector,v,C(p[10],x(p[11],r),G)),B.texCoords[0]=0,B.texCoords[1]=u,B.direction[0]=this._distanceAlongCorrection?r[0]:0,B.direction[1]=this._distanceAlongCorrection?r[1]:0,t.vectors.count=4,(j=t.lists[i.ENTRY]).items[0]=0,j.items[1]=1,j.items[2]=2,j.count=3,(k=t.lists[i.EXIT]).items[0]=0,k.items[1]=1,k.items[2]=3,k.count=3,S<o?((D=t.lists[i.CAP]).count=0,t.capCenter=void 0):((D=t.lists[i.CAP]).items[0]=2,D.items[1]=3,D.count=2,t.capCenter=1)}else if(!U&&!E){var F,q,j,k;C((F=t.vectors.items[0]).vector,T,1/I),F.texCoords[0]=0,F.texCoords[1]=l,F.direction[0]=0,F.direction[1]=0,C((q=t.vectors.items[1]).vector,w,1/I),q.texCoords[0]=0,q.texCoords[1]=u,q.direction[0]=0,q.direction[1]=0,t.vectors.count=2,(j=t.lists[i.ENTRY]).items[0]=0,j.items[1]=1,j.count=2,(k=t.lists[i.EXIT]).items[0]=0,k.items[1]=1,k.count=2,t.lists[i.CAP].count=0,t.capCenter=void 0}h<0&&(A(t.lists[i.ENTRY]),A(t.lists[i.EXIT]))},t.prototype.roundJoin=function(t,e,r,n){var o=_(e,r),h=0<o?[a,1]:[1,a],c=h[0],l=h[1],u=0<o?x(p[0],m(p[1],e)):m(p[2],e),d=0<o?x(p[3],m(p[4],r)):m(p[5],r),y=p[6];y[0]=u[0]+d[0],y[1]=u[1]+d[1];var w=g(p[7],y),T=x(p[8],w),P=f(w,u),R=_(w,u),S=Math.abs(R/P),L=1+S*S<s?[S,this._distanceAlongCorrection]:[Math.sqrt(s-1),!0],M=L[0];if(L[1]){(O=t.vectors.items[0]).vector[0]=u[0],O.vector[1]=u[1],O.texCoords[0]=0,O.texCoords[1]=l,O.direction[0]=0,O.direction[1]=0,(G=t.vectors.items[1]).vector[0]=d[0],G.vector[1]=d[1],G.texCoords[0]=0,G.texCoords[1]=l,G.direction[0]=0,G.direction[1]=0,b((U=t.vectors.items[2]).vector,x(p[9],u),C(p[10],x(p[11],e),M)),U.texCoords[0]=0,U.texCoords[1]=c,U.direction[0]=this._distanceAlongCorrection?e[0]:0,U.direction[1]=this._distanceAlongCorrection?e[1]:0,b((N=t.vectors.items[3]).vector,x(p[12],d),C(p[13],r,M)),N.texCoords[0]=0,N.texCoords[1]=c,N.direction[0]=this._distanceAlongCorrection?r[0]:0,N.direction[1]=this._distanceAlongCorrection?r[1]:0;var E=t.vectors.items[4];E.vector[0]=0,E.vector[1]=0,E.texCoords[0]=0,E.texCoords[1]=0,E.direction[0]=0,E.direction[1]=0,t.vectors.count=5,(V=t.lists[i.ENTRY]).items[0]=2,V.items[1]=4,V.items[2]=0,V.count=3,(B=t.lists[i.EXIT]).items[0]=3,B.items[1]=4,B.items[2]=1,B.count=3,t.capCenter=4}else{var O,G,U,N,V,B;(O=t.vectors.items[0]).vector[0]=u[0],O.vector[1]=u[1],O.texCoords[0]=0,O.texCoords[1]=l,O.direction[0]=0,O.direction[1]=0,(G=t.vectors.items[1]).vector[0]=d[0],G.vector[1]=d[1],G.texCoords[0]=0,G.texCoords[1]=l,G.direction[0]=0,G.direction[1]=0,C((U=t.vectors.items[2]).vector,T,1/P),U.texCoords[0]=0,U.texCoords[1]=c,U.direction[0]=0,U.direction[1]=0,(N=t.vectors.items[3]).vector[0]=0,N.vector[1]=0,N.texCoords[0]=0,N.texCoords[1]=0,N.direction[0]=0,N.direction[1]=0,t.vectors.count=4,(V=t.lists[i.ENTRY]).items[0]=2,V.items[1]=3,V.items[2]=0,V.count=3,(B=t.lists[i.EXIT]).items[0]=2,B.items[1]=3,B.items[2]=1,B.count=3,t.capCenter=3}I(v,u,d,n,o<0);var D,F=t.vectors.count,q=t.lists[i.CAP];for(D=q.items[0]=0;D<v.count;++D){var j=v.items[D],k=t.vectors.items[F+D];k.vector[0]=j[0],k.vector[1]=j[1],k.texCoords[0]=0,k.texCoords[1]=l,k.direction[0]=0,k.direction[1]=0,q.items[D+1]=F+D}q.items[v.count+1]=1,q.count=v.count+2,t.vectors.count=F+v.count,o<0&&(A(t.lists[i.ENTRY]),A(t.lists[i.EXIT]))},t.prototype.unitRoundJoin=function(t,e,r,n){var o=_(e,r),s=0<o?[a,1]:[1,a],h=s[0],c=s[1],l=0<o?x(p[0],m(p[1],e)):m(p[2],e),u=0<o?x(p[3],m(p[4],r)):m(p[5],r),d=t.vectors.items[0];d.vector[0]=l[0],d.vector[1]=l[1],d.texCoords[0]=0,d.texCoords[1]=c,d.direction[0]=0,d.direction[1]=0;var f=t.vectors.items[1];f.vector[0]=u[0],f.vector[1]=u[1],f.texCoords[0]=0,f.texCoords[1]=c,f.direction[0]=0,f.direction[1]=0;var y=t.vectors.items[2];x(y.vector,l),y.texCoords[0]=0,y.texCoords[1]=h,y.direction[0]=0,y.direction[1]=0;var g=t.vectors.items[3];x(g.vector,u),g.texCoords[0]=0,g.texCoords[1]=h,g.direction[0]=0,g.direction[1]=0;var C=t.vectors.items[4];C.vector[0]=0,C.vector[1]=0,C.texCoords[0]=0,C.texCoords[1]=0,C.direction[0]=0,C.direction[1]=0,t.vectors.count=5;var b=t.lists[i.ENTRY];b.items[0]=2,b.items[1]=0,b.count=2;var w=t.lists[i.EXIT];w.items[0]=3,w.items[1]=1,w.count=2,t.capCenter=4,I(v,l,u,n,o<0);var T,P=t.vectors.count,R=t.lists[i.CAP];for(T=R.items[0]=0;T<v.count;++T){var S=v.items[T],L=t.vectors.items[P+T];L.vector[0]=S[0],L.vector[1]=S[1],L.texCoords[0]=0,L.texCoords[1]=c,L.direction[0]=0,L.direction[1]=0,R.items[T+1]=P+T}R.items[v.count+1]=1,R.count=v.count+2,t.vectors.count=P+v.count,o<0&&(A(t.lists[i.ENTRY]),A(t.lists[i.EXIT]))},t.prototype.rectJoin=function(t,e,r){var n=m(p[0],e),o=m(p[1],r),s=t.vectors.items[0];s.vector[0]=n[0],s.vector[1]=n[1],s.texCoords[0]=0,s.texCoords[1]=a,s.direction[0]=0,s.direction[1]=0;var h=t.vectors.items[1];h.vector[0]=o[0],h.vector[1]=o[1],h.texCoords[0]=0,h.texCoords[1]=a,h.direction[0]=0,h.direction[1]=0;var c=t.vectors.items[2];x(c.vector,n),c.texCoords[0]=0,c.texCoords[1]=1,c.direction[0]=0,c.direction[1]=0;var l=t.vectors.items[3];x(l.vector,o),l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=0,l.direction[1]=0,t.vectors.count=4;var u=t.lists[i.ENTRY];u.items[0]=0,u.items[1]=2,u.count=2;var d=t.lists[i.EXIT];d.items[0]=1,d.items[1]=3,d.count=2,t.capCenter=void 0},t}();e.Tessellator=N}.apply(null,r))||(t.exports=n)},2263:function(t,e,i){var r,n;r=[i.dj.c(t.i),e,i(2),i(1),i(79),i(50),i(26),i(17),i(9),i(57),i(21),i(0),i(35),i(44),i(1684),i(1595),i(1555),i(1510),i(1512),i(1566),i(1508)],void 0===(n=function(t,e,i,r,n,o,s,a,h,c,l,u,d,p,v,f,y,g,m,_,x){var C=s.ofType(n);return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._handles=new a,e._bitmapIndex=new Map,e._mapImageContainer=new y.BitmapContainer,e._featuresMap=new Map,e.allVisiblePoints=new C,e.allVisiblePolylines=new C,e.allVisiblePolygons=new C,e.allVisibleMapImages=new s,e.container=new g.Container,e}return i(e,t),e.prototype.hitTest=function(t,e){var i=this;if(this.suspended||!this._pointsView&&!this._polylinesView&&!this._polygonsView)return h.resolve(null);var r=[this._pointsView.hitTest(t,e),this._polylinesView.hitTest(t,e),this._polygonsView.hitTest(t,e)];return h.all(r).then(function(t){return t.filter(function(t){return t&&(t.layer=i.layer,t.sourceLayer=i.layer),!!t})[0]||null})},e.prototype.update=function(t){this._polygonsView&&this._polygonsView.update(t),this._polylinesView&&this._polylinesView.update(t),this._pointsView&&this._pointsView.update(t)},e.prototype.attach=function(){var t=this;this._handles.add(this.allVisibleMapImages.on("change",function(e){e.added.forEach(function(e){return t._addMapImage(e)}),e.removed.forEach(function(e){return t._removeMapImage(e)})})),this.container.addChild(this._mapImageContainer),this._polygonsView=new _.default({view:this.view,graphics:this.allVisiblePolygons}),this.container.addChild(this._polygonsView.container),this._polylinesView=new _.default({view:this.view,graphics:this.allVisiblePolylines}),this.container.addChild(this._polylinesView.container),this._pointsView=new _.default({view:this.view,graphics:this.allVisiblePoints}),this.container.addChild(this._pointsView.container),this.watch("layer.visibleSublayers",function(){return t._refreshCollections()}),this._fetchService()},e.prototype.detach=function(){this._handles.removeAll(),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null)},e.prototype.moveStart=function(){this.requestUpdate()},e.prototype.viewChange=function(){this.requestUpdate()},e.prototype.moveEnd=function(){this.requestUpdate()},e.prototype._addMapImage=function(t){var e=this;this.view.spatialReference.isWGS84&&o(t.href,{responseType:"image"}).then(function(i){var r=i.data,n=d.fromJSON(t.extent);p.canProject(n,e.view.spatialReference)&&(n=p.project(n,e.view.spatialReference));var o=new f.Bitmap(r);o.x=n.xmin,o.y=n.ymax,o.resolution=n.width/r.naturalWidth,o.rotation=t.rotation,e._mapImageContainer.addChild(o),e._bitmapIndex.set(t,o)})},e.prototype._fetchService=function(){var t=this;return this._getParsedKML().then(function(e){t._fetchSublayerService(t.layer,e)})},e.prototype._fetchSublayerService=function(t,e){var i=this,r=t.sublayers;r&&r.forEach(function(t){l.whenTrueOnce(t,"visible").then(function(){return t.load()}).then(function(){return t.networkLink?i._getParsedKML():(i._featuresMap.set(t,i._getGraphicsForSublayer(t,e)),i._handles.remove("refresh-collections"),i._handles.add(c.schedule(function(){return i._refreshCollections()}),"refresh-collections"),e)}).then(function(e){i._fetchSublayerService(t,e)})})},e.prototype._getParsedKML=function(){return v.fetchService(this.layer.url,this.view.spatialReference,this.layer.refreshInterval).then(function(t){return v.parseKML(t.data)})},e.prototype._getGraphicsForSublayer=function(t,e){var i=null;return e.sublayers.some(function(e){return i=e,e.id===t.id})?{points:i.points&&v.getGraphics(i.points),polylines:i.polylines&&v.getGraphics(i.polylines),polygons:i.polygons&&v.getGraphics(i.polygons),mapImages:i.mapImages}:null},e.prototype._refreshCollections=function(){var t=this,e=this.get("layer.visibleSublayers");this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),e&&e.length&&e.forEach(function(e){var i=t._featuresMap.get(e);i&&(t.allVisiblePoints.addMany(i.points),t.allVisiblePolylines.addMany(i.polylines),t.allVisiblePolygons.addMany(i.polygons),t.allVisibleMapImages.addMany(i.mapImages))})},e.prototype._removeMapImage=function(t){var e=this._bitmapIndex.get(t);e&&(this._mapImageContainer.removeChild(e),this._bitmapIndex.delete(t))},r([u.subclass("esri.views.2d.layers.KMLLayerView2D")],e)}(u.declared(m,x))}.apply(null,r))||(t.exports=n)}}]);